{"ast":null,"code":"var _jsxFileName = \"/workspaces/simao/whaticket/frontend/src/components/FlowBuilderIntervalModal/index.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport * as Yup from \"yup\";\nimport { Formik, FieldArray, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { Stack } from \"@mui/material\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  textField: {\n    marginRight: theme.spacing(1),\n    flex: 1\n  },\n  extraAttr: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  btnWrapper: {\n    position: \"relative\"\n  },\n  buttonProgress: {\n    color: green[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12\n  }\n}));\nconst FlowBuilderIntervalModal = ({\n  open,\n  onSave,\n  data,\n  onUpdate,\n  close\n}) => {\n  const classes = useStyles();\n  const isMounted = useRef(true);\n  const [timerSec, setTimerSec] = useState(0);\n  const [activeModal, setActiveModal] = useState(false);\n  useEffect(() => {\n    if (open === 'edit') {\n      setTimerSec(data.data.sec);\n      setActiveModal(true);\n    } else if (open === 'create') {\n      setTimerSec(0);\n      setActiveModal(true);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [open]);\n  const handleClose = () => {\n    close(null);\n    setActiveModal(false);\n  };\n  const handleSaveContact = async values => {\n    if (!timerSec || parseInt(timerSec) <= 0) {\n      return toast.error('Adicione o valor de intervalo');\n    }\n    if (parseInt(timerSec) > 120) {\n      return toast.error('Máximo de tempo atingido 120 segundos');\n    }\n    if (open === 'edit') {\n      onUpdate({\n        ...data,\n        data: {\n          sec: timerSec\n        }\n      });\n    } else if (open === 'create') {\n      onSave({\n        sec: timerSec\n      });\n    }\n    handleClose();\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Dialog, {\n    open: activeModal,\n    onClose: handleClose,\n    fullWidth: \"md\",\n    scroll: \"paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, open === 'create' ? `Adicionar um intervalo ao fluxo` : `Editar intervalo`), /*#__PURE__*/React.createElement(Stack, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DialogContent, {\n    dividers: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: 'Tempo em segundos',\n    name: \"timer\",\n    type: \"number\",\n    value: timerSec,\n    onChange: e => setTimerSec(e.target.value),\n    autoFocus: true,\n    variant: \"outlined\",\n    InputProps: {\n      inputProps: {\n        min: 0\n      }\n    },\n    margin: \"dense\",\n    className: classes.textField,\n    style: {\n      width: \"95%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleClose,\n    color: \"secondary\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, i18n.t(\"contactModal.buttons.cancel\")), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"primary\",\n    variant: \"contained\",\n    className: classes.btnWrapper,\n    onClick: () => handleSaveContact(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, open === 'create' ? `Adicionar` : 'Editar')))));\n};\nexport default FlowBuilderIntervalModal;","map":{"version":3,"names":["React","useState","useEffect","useRef","Yup","Formik","FieldArray","Form","Field","toast","makeStyles","green","Button","TextField","Dialog","DialogActions","DialogContent","DialogTitle","Typography","IconButton","DeleteOutlineIcon","CircularProgress","i18n","api","toastError","Stack","useStyles","theme","root","display","flexWrap","textField","marginRight","spacing","flex","extraAttr","justifyContent","alignItems","btnWrapper","position","buttonProgress","color","top","left","marginTop","marginLeft","FlowBuilderIntervalModal","open","onSave","data","onUpdate","close","classes","isMounted","timerSec","setTimerSec","activeModal","setActiveModal","sec","current","handleClose","handleSaveContact","values","parseInt","error","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClose","fullWidth","scroll","id","dividers","label","name","type","value","onChange","e","target","autoFocus","variant","InputProps","inputProps","min","margin","style","width","onClick","t"],"sources":["/workspaces/simao/whaticket/frontend/src/components/FlowBuilderIntervalModal/index.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\n\nimport * as Yup from \"yup\";\nimport { Formik, FieldArray, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { Stack } from \"@mui/material\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  textField: {\n    marginRight: theme.spacing(1),\n    flex: 1\n  },\n\n  extraAttr: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n\n  btnWrapper: {\n    position: \"relative\"\n  },\n\n  buttonProgress: {\n    color: green[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12\n  }\n}));\n\nconst FlowBuilderIntervalModal = ({\n  open,\n  onSave,\n  data,\n  onUpdate,\n  close\n}) => {\n  const classes = useStyles();\n  const isMounted = useRef(true);\n\n  const [timerSec, setTimerSec] = useState(0)\n  const [activeModal, setActiveModal] = useState(false)\n\n  useEffect(() => {\n    if(open === 'edit'){\n      setTimerSec(data.data.sec)\n      setActiveModal(true)\n    } else if(open === 'create'){\n      setTimerSec(0)\n      setActiveModal(true)\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [open]);\n  \n\n  const handleClose = () => {\n    close(null)\n    setActiveModal(false)\n  };\n\n  const handleSaveContact = async values => {\n    if(!timerSec || parseInt(timerSec)  <= 0){\n      return toast.error('Adicione o valor de intervalo')\n    }\n    if(parseInt(timerSec) > 120){\n      return toast.error('Máximo de tempo atingido 120 segundos')\n    }\n    if(open === 'edit'){\n      onUpdate({\n        ...data,\n        data: { sec: timerSec }\n      });\n    } else if(open === 'create'){\n      onSave({\n        sec: timerSec\n      })\n    }\n    handleClose()\n    \n  };\n\n  return (\n    <div className={classes.root}>\n      <Dialog open={activeModal} onClose={handleClose} fullWidth=\"md\" scroll=\"paper\">\n        <DialogTitle id=\"form-dialog-title\">\n          {open === 'create' ? `Adicionar um intervalo ao fluxo`: `Editar intervalo`}\n        </DialogTitle>        \n            <Stack>\n              <DialogContent dividers>\n                <TextField\n                  label={'Tempo em segundos'}\n                  name=\"timer\"\n                  type=\"number\"\n                  value={timerSec}\n                  onChange={(e) => setTimerSec(e.target.value)}\n                  autoFocus\n                  variant=\"outlined\"\n                  InputProps={{ inputProps: { min: 0 } }}\n                  margin=\"dense\"\n                  className={classes.textField}\n                  style={{ width: \"95%\" }}\n                />\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  onClick={handleClose}\n                  color=\"secondary\"\n                  variant=\"outlined\"\n                >\n                  {i18n.t(\"contactModal.buttons.cancel\")}\n                </Button>\n                <Button\n                  type=\"submit\"\n                  color=\"primary\"\n                  variant=\"contained\"\n                  className={classes.btnWrapper}\n                  onClick={() => handleSaveContact()}\n                >\n                  {open === 'create' ? `Adicionar` : 'Editar'}                  \n                </Button>\n              </DialogActions>\n            </Stack>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default FlowBuilderIntervalModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}