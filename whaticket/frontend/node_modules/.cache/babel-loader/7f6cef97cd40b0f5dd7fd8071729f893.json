{"ast":null,"code":"var _jsxFileName = \"/workspaces/simao/whaticket/frontend/src/components/ShowTicketLogModal/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@mui/material';\nimport { i18n } from '../../translate/i18n';\nimport { Stepper, Step, StepLabel, Typography, Paper, Grid } from '@material-ui/core';\nimport { format, parseISO } from 'date-fns';\nimport api from '../../services/api';\nimport toastError from \"../../errors/toastError\";\nconst ShowTicketLogModal = ({\n  isOpen,\n  handleClose,\n  ticketId\n}) => {\n  const [activeStep, setActiveStep] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [logs, setLogs] = useState([]);\n  const typeDescriptions = {\n    create: i18n.t(\"showTicketLogModal.options.create\"),\n    chatBot: i18n.t(\"showTicketLogModal.options.chatBot\"),\n    queue: i18n.t(\"showTicketLogModal.options.queue\"),\n    open: i18n.t(\"showTicketLogModal.options.open\"),\n    access: i18n.t(\"showTicketLogModal.options.access\"),\n    transfered: i18n.t(\"showTicketLogModal.options.transfered\"),\n    receivedTransfer: i18n.t(\"showTicketLogModal.options.receivedTransfer\"),\n    pending: i18n.t(\"showTicketLogModal.options.pending\"),\n    closed: i18n.t(\"showTicketLogModal.options.closed\"),\n    reopen: i18n.t(\"showTicketLogModal.options.reopen\"),\n    redirect: i18n.t(\"showTicketLogModal.options.redirect\")\n    // Adicione outros mapeamentos conforme necessário\n  };\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchLogs = async () => {\n        try {\n          const {\n            data\n          } = await api.get(`/tickets-log/${ticketId}`);\n          setLogs(data);\n          setLoading(false);\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchLogs();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [ticketId]);\n  return /*#__PURE__*/React.createElement(Dialog, {\n    open: isOpen,\n    onClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, i18n.t('showTicketLogModal.title.header')), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Stepper, {\n    activeStep: activeStep,\n    orientation: \"vertical\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, logs.map((log, index) => {\n    var _log$user, _log$queue, _log$queue2, _log$user2;\n    return /*#__PURE__*/React.createElement(Step, {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(StepLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 19\n      }\n    }, `${log.type === 'access' || log.type === 'transfered' || log.type === 'open' || log.type === 'pending' || log.type === \"closed\" || log.type === \"reopen\" ? log === null || log === void 0 ? void 0 : (_log$user = log.user) === null || _log$user === void 0 ? void 0 : _log$user.name : (log === null || log === void 0 ? void 0 : log.type) === 'queue' || (log === null || log === void 0 ? void 0 : log.type) === 'redirect' ? log === null || log === void 0 ? void 0 : (_log$queue = log.queue) === null || _log$queue === void 0 ? void 0 : _log$queue.name : log.type === 'receivedTransfer' ? (log === null || log === void 0 ? void 0 : (_log$queue2 = log.queue) === null || _log$queue2 === void 0 ? void 0 : _log$queue2.name) + ' - ' + (log === null || log === void 0 ? void 0 : (_log$user2 = log.user) === null || _log$user2 === void 0 ? void 0 : _log$user2.name) : ''} \n                    ${typeDescriptions[log.type]} - ${format(parseISO(log === null || log === void 0 ? void 0 : log.createdAt), 'dd/MM/yyyy HH:mm')}`));\n  }))))), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleClose,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Fechar\")));\n};\nexport default ShowTicketLogModal;","map":{"version":3,"names":["React","useState","useEffect","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","i18n","Stepper","Step","StepLabel","Typography","Paper","Grid","format","parseISO","api","toastError","ShowTicketLogModal","isOpen","handleClose","ticketId","activeStep","setActiveStep","loading","setLoading","logs","setLogs","typeDescriptions","create","t","chatBot","queue","open","access","transfered","receivedTransfer","pending","closed","reopen","redirect","delayDebounceFn","setTimeout","fetchLogs","data","get","err","clearTimeout","createElement","onClose","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","orientation","map","log","index","_log$user","_log$queue","_log$queue2","_log$user2","key","type","user","name","createdAt","onClick","color"],"sources":["/workspaces/simao/whaticket/frontend/src/components/ShowTicketLogModal/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@mui/material';\nimport { i18n } from '../../translate/i18n';\nimport { Stepper, Step, StepLabel, Typography, Paper, Grid } from '@material-ui/core';\nimport { format, parseISO } from 'date-fns';\nimport api from '../../services/api';\nimport toastError from \"../../errors/toastError\";\n\nconst ShowTicketLogModal = ({ isOpen, handleClose, ticketId }) => {\n  const [activeStep, setActiveStep] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [logs, setLogs] = useState([]);\n\n  const typeDescriptions = {\n    create: i18n.t(\"showTicketLogModal.options.create\"),\n    chatBot: i18n.t(\"showTicketLogModal.options.chatBot\"),\n    queue: i18n.t(\"showTicketLogModal.options.queue\"),\n    open: i18n.t(\"showTicketLogModal.options.open\"),\n    access: i18n.t(\"showTicketLogModal.options.access\"),\n    transfered: i18n.t(\"showTicketLogModal.options.transfered\"),\n    receivedTransfer: i18n.t(\"showTicketLogModal.options.receivedTransfer\"),\n    pending: i18n.t(\"showTicketLogModal.options.pending\"),\n    closed: i18n.t(\"showTicketLogModal.options.closed\"),\n    reopen: i18n.t(\"showTicketLogModal.options.reopen\"),\n    redirect: i18n.t(\"showTicketLogModal.options.redirect\")\n    // Adicione outros mapeamentos conforme necessário\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchLogs = async () => {\n        try {\n          const { data } = await api.get(`/tickets-log/${ticketId}`);\n          setLogs(data);\n          setLoading(false);\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchLogs();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [ticketId]);\n\n  return (\n    <Dialog open={isOpen} onClose={handleClose}>\n      <DialogTitle>{i18n.t('showTicketLogModal.title.header')}</DialogTitle>\n      <DialogContent>\n        <Paper>\n          <DialogContentText>\n            <Stepper activeStep={activeStep} orientation=\"vertical\">\n              {logs.map((log, index) => (\n                <Step key={index}>\n                  <StepLabel>\n                    {`${log.type === 'access' ||\n                      log.type === 'transfered' ||\n                      log.type === 'open' || log.type === 'pending' || log.type === \"closed\" || log.type === \"reopen\"\n                      ? log?.user?.name\n                      : log?.type === 'queue' || log?.type === 'redirect'\n                        ? log?.queue?.name\n                        : log.type === 'receivedTransfer'\n                          ? log?.queue?.name + ' - ' + log?.user?.name\n                          : ''} \n                    ${typeDescriptions[log.type]} - ${format(\n                            parseISO(log?.createdAt),\n                            'dd/MM/yyyy HH:mm'\n                          )}`}\n                  </StepLabel>\n                </Step>\n              ))}\n            </Stepper>\n          </DialogContentText>\n        </Paper>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          Fechar\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default ShowTicketLogModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}