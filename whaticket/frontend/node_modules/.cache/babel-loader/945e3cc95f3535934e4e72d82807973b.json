{"ast":null,"code":"var _jsxFileName = \"/workspaces/simao/whaticket/frontend/src/pages/Subscription/index.js\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport SubscriptionModal from \"../../components/SubscriptionModal\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport MainContainer from \"../../components/MainContainer\";\nimport moment from \"moment\";\nimport { useDate } from \"../../hooks/useDate\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nconst useStyles = makeStyles(theme => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles\n  }\n}));\nconst Contacts = () => {\n  var _user$company, _user$company2;\n  const classes = useStyles();\n  const {\n    user,\n    socket\n  } = useContext(AuthContext);\n  const [loading] = useState(false);\n  const [, setPageNumber] = useState(1);\n  const [selectedContactId, setSelectedContactId] = useState(null);\n  const [contactModalOpen, setContactModalOpen] = useState(false);\n  const [hasMore] = useState(false);\n  const [dueDate, setDueDate] = useState(\"\");\n  const {\n    returnDays\n  } = useDate();\n  const handleOpenContactModal = () => {\n    setSelectedContactId(null);\n    setContactModalOpen(true);\n  };\n  const handleCloseContactModal = () => {\n    setSelectedContactId(null);\n    setContactModalOpen(false);\n  };\n  const loadMore = () => {\n    setPageNumber(prevState => prevState + 1);\n  };\n  const handleScroll = e => {\n    if (!hasMore || loading) return;\n    const {\n      scrollTop,\n      scrollHeight,\n      clientHeight\n    } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n  useEffect(() => {\n    const currentDueDate = localStorage.getItem(\"dueDate\");\n    if (currentDueDate !== \"\" && currentDueDate !== \"null\") {\n      setDueDate(moment(currentDueDate).format(\"DD/MM/YYYY\"));\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(MainContainer, {\n    className: classes.mainContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SubscriptionModal, {\n    open: contactModalOpen,\n    onClose: handleCloseContactModal,\n    \"aria-labelledby\": \"form-dialog-title\",\n    contactId: selectedContactId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(MainHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Assinatura\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.mainPaper,\n    variant: \"outlined\",\n    onScroll: handleScroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-full-width\",\n    label: \"Per\\xEDodo de Licen\\xE7a\"\n    // defaultValue={`Sua licença vence em ${returnDays(user?.company?.dueDate)} dias!`}\n    ,\n    defaultValue: returnDays(user === null || user === void 0 ? void 0 : (_user$company = user.company) === null || _user$company === void 0 ? void 0 : _user$company.dueDate) === 0 ? `Sua licença vence em hoje!` : `Sua licença vence em ${returnDays(user === null || user === void 0 ? void 0 : (_user$company2 = user.company) === null || _user$company2 === void 0 ? void 0 : _user$company2.dueDate)} dias!`,\n    fullWidth: true,\n    margin: \"normal\",\n    InputLabelProps: {\n      shrink: true\n    },\n    InputProps: {\n      readOnly: true\n    },\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-full-width\",\n    label: \"Email de cobran\\xE7a\",\n    defaultValue: user === null || user === void 0 ? void 0 : user.email,\n    fullWidth: true,\n    margin: \"normal\",\n    InputLabelProps: {\n      shrink: true\n    },\n    InputProps: {\n      readOnly: true\n    },\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleOpenContactModal,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, \"Assine Agora!\")))));\n};\nexport default Contacts;","map":{"version":3,"names":["React","useState","useContext","useEffect","makeStyles","Paper","Button","Grid","TextField","SubscriptionModal","MainHeader","Title","MainContainer","moment","useDate","AuthContext","useStyles","theme","mainPaper","flex","padding","spacing","overflowY","scrollbarStyles","Contacts","_user$company","_user$company2","classes","user","socket","loading","setPageNumber","selectedContactId","setSelectedContactId","contactModalOpen","setContactModalOpen","hasMore","dueDate","setDueDate","returnDays","handleOpenContactModal","handleCloseContactModal","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","currentDueDate","localStorage","getItem","format","createElement","className","mainContainer","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","open","onClose","contactId","item","xs","sm","variant","onScroll","id","label","defaultValue","company","fullWidth","margin","InputLabelProps","shrink","InputProps","readOnly","email","color","onClick"],"sources":["/workspaces/simao/whaticket/frontend/src/pages/Subscription/index.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\n\nimport SubscriptionModal from \"../../components/SubscriptionModal\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport MainContainer from \"../../components/MainContainer\";\nimport moment from \"moment\";\nimport { useDate } from \"../../hooks/useDate\";\n\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n}));\n\nconst Contacts = () => {\n  const classes = useStyles();\n  const { user, socket } = useContext(AuthContext);\n\n  const [loading,] = useState(false);\n  const [, setPageNumber] = useState(1);\n  const [selectedContactId, setSelectedContactId] = useState(null);\n  const [contactModalOpen, setContactModalOpen] = useState(false);\n  const [hasMore,] = useState(false);\n  const [dueDate, setDueDate] = useState(\"\");\n  const { returnDays } = useDate();\n\n  const handleOpenContactModal = () => {\n    setSelectedContactId(null);\n    setContactModalOpen(true);\n  };\n\n  const handleCloseContactModal = () => {\n    setSelectedContactId(null);\n    setContactModalOpen(false);\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  useEffect(() => {\n    const currentDueDate = localStorage.getItem(\"dueDate\");\n    if (currentDueDate !== \"\" && currentDueDate !== \"null\") {\n      setDueDate(moment(currentDueDate).format(\"DD/MM/YYYY\"));\n    }\n  }, []);\n\n  return (\n    <MainContainer className={classes.mainContainer}>\n      <SubscriptionModal\n        open={contactModalOpen}\n        onClose={handleCloseContactModal}\n        aria-labelledby=\"form-dialog-title\"\n        contactId={selectedContactId}\n      ></SubscriptionModal>\n\n      <MainHeader>\n        <Title>Assinatura</Title>\n      </MainHeader>\n      <Grid item xs={12} sm={4}>\n        <Paper\n          className={classes.mainPaper}\n          variant=\"outlined\"\n          onScroll={handleScroll}\n        >\n\n          <div>\n            <TextField\n              id=\"outlined-full-width\"\n              label=\"Período de Licença\"\n              // defaultValue={`Sua licença vence em ${returnDays(user?.company?.dueDate)} dias!`}\n              defaultValue={returnDays(user?.company?.dueDate) === 0 ? `Sua licença vence em hoje!` : `Sua licença vence em ${returnDays(user?.company?.dueDate)} dias!`}\n              fullWidth\n              margin=\"normal\"\n              InputLabelProps={{ shrink: true, }}\n              InputProps={{ readOnly: true, }}\n              variant=\"outlined\"\n            />\n\n          </div>\n\n          <div>\n            <TextField\n              id=\"outlined-full-width\"\n              label=\"Email de cobrança\"\n              defaultValue={user?.email}\n              fullWidth\n              margin=\"normal\"\n              InputLabelProps={{\n                shrink: true,\n              }}\n              InputProps={{\n                readOnly: true,\n              }}\n              variant=\"outlined\"\n            />\n\n          </div>\n\n          <div>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleOpenContactModal}\n              fullWidth\n            >\n              Assine Agora!\n            </Button>\n          </div>\n\n        </Paper>\n      </Grid>\n    </MainContainer>\n  );\n};\n\nexport default Contacts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}