{"ast":null,"code":"var _jsxFileName = \"/workspaces/simao/whaticket/frontend/src/pages/Users/index.js\";\nimport React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport { AccountCircle } from \"@material-ui/icons\";\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport Title from \"../../components/Title\";\nimport whatsappIcon from '../../assets/nopicture.png';\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport UserModal from \"../../components/UserModal\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport toastError from \"../../errors/toastError\";\nimport { SocketContext, socketManager } from \"../../context/Socket/SocketContext\";\nimport UserStatusIcon from \"../../components/UserModal/statusIcon\";\nimport { getBackendUrl } from \"../../config\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { Avatar } from \"@material-ui/core\";\nimport ForbiddenPage from \"../../components/ForbiddenPage\";\nconst backendUrl = getBackendUrl();\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_USERS\") {\n    const users = action.payload;\n    const newUsers = [];\n    users.forEach(user => {\n      const userIndex = state.findIndex(u => u.id === user.id);\n      if (userIndex !== -1) {\n        state[userIndex] = user;\n      } else {\n        newUsers.push(user);\n      }\n    });\n    return [...state, ...newUsers];\n  }\n  if (action.type === \"UPDATE_USERS\") {\n    const user = action.payload;\n    const userIndex = state.findIndex(u => u.id === user.id);\n    if (userIndex !== -1) {\n      state[userIndex] = user;\n      return [...state];\n    } else {\n      return [user, ...state];\n    }\n  }\n  if (action.type === \"DELETE_USER\") {\n    const userId = action.payload;\n    const userIndex = state.findIndex(u => u.id === userId);\n    if (userIndex !== -1) {\n      state.splice(userIndex, 1);\n    }\n    return [...state];\n  }\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\nconst useStyles = makeStyles(theme => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(2),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles\n  },\n  userAvatar: {\n    width: theme.spacing(6),\n    height: theme.spacing(6)\n  },\n  avatarDiv: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  loadingContainer: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: theme.spacing(3)\n  },\n  loadingText: {\n    marginLeft: theme.spacing(2)\n  }\n}));\nconst Users = () => {\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [deletingUser, setDeletingUser] = useState(null);\n  const [userModalOpen, setUserModalOpen] = useState(false);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [users, dispatch] = useReducer(reducer, []);\n  const {\n    user: loggedInUser,\n    socket\n  } = useContext(AuthContext);\n  const {\n    profileImage\n  } = loggedInUser;\n  useEffect(() => {\n    dispatch({\n      type: \"RESET\"\n    });\n    setPageNumber(1);\n  }, [searchParam]);\n  useEffect(() => {\n    setLoading(true);\n    const fetchUsers = async () => {\n      try {\n        const {\n          data\n        } = await api.get(\"/users/\", {\n          params: {\n            searchParam,\n            pageNumber\n          }\n        });\n        dispatch({\n          type: \"LOAD_USERS\",\n          payload: data.users\n        });\n        setHasMore(data.hasMore);\n      } catch (err) {\n        toastError(err);\n      } finally {\n        setLoading(false);\n        setLoadingMore(false);\n      }\n    };\n    fetchUsers();\n  }, [searchParam, pageNumber]);\n  useEffect(() => {\n    if (loggedInUser) {\n      const companyId = loggedInUser.companyId;\n      const onCompanyUser = data => {\n        if (data.action === \"update\" || data.action === \"create\") {\n          dispatch({\n            type: \"UPDATE_USERS\",\n            payload: data.user\n          });\n        }\n        if (data.action === \"delete\") {\n          dispatch({\n            type: \"DELETE_USER\",\n            payload: +data.userId\n          });\n        }\n      };\n      socket.on(`company-${companyId}-user`, onCompanyUser);\n      return () => {\n        socket.off(`company-${companyId}-user`, onCompanyUser);\n      };\n    }\n  }, [socket]);\n  const handleOpenUserModal = () => {\n    setSelectedUser(null);\n    setUserModalOpen(true);\n  };\n  const handleCloseUserModal = () => {\n    setSelectedUser(null);\n    setUserModalOpen(false);\n  };\n  const handleSearch = event => {\n    setSearchParam(event.target.value.toLowerCase());\n  };\n  const handleEditUser = user => {\n    setSelectedUser(user);\n    setUserModalOpen(true);\n  };\n  const handleDeleteUser = async userId => {\n    try {\n      await api.delete(`/users/${userId}`);\n      toast.success(i18n.t(\"users.toasts.deleted\"));\n    } catch (err) {\n      toastError(err);\n    }\n    setDeletingUser(null);\n    setSearchParam(\"\");\n    setPageNumber(1);\n  };\n  const loadMore = () => {\n    setLoadingMore(true);\n    setPageNumber(prevPage => prevPage + 1);\n  };\n  const handleScroll = e => {\n    if (!hasMore || loading) return;\n    const {\n      scrollTop,\n      scrollHeight,\n      clientHeight\n    } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n  const renderProfileImage = user => {\n    if (user.id === loggedInUser.id) {\n      return /*#__PURE__*/React.createElement(Avatar, {\n        src: `${backendUrl}/public/company${user.companyId}/user/${profileImage ? profileImage : whatsappIcon}`,\n        alt: user.name,\n        className: classes.userAvatar,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 9\n        }\n      });\n    }\n    if (user.id !== loggedInUser.id) {\n      return /*#__PURE__*/React.createElement(Avatar, {\n        src: user.profileImage ? `${backendUrl}/public/company${user.companyId}/user/${user.profileImage}` : whatsappIcon,\n        alt: user.name,\n        className: classes.userAvatar,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 9\n        }\n      });\n    }\n    return /*#__PURE__*/React.createElement(AccountCircle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 7\n      }\n    });\n  };\n  return /*#__PURE__*/React.createElement(MainContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ConfirmationModal, {\n    title: deletingUser && `${i18n.t(\"users.confirmationModal.deleteTitle\")} ${deletingUser.name}?`,\n    open: confirmModalOpen,\n    onClose: () => setConfirmModalOpen(false),\n    onConfirm: () => handleDeleteUser(deletingUser.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }\n  }, i18n.t(\"users.confirmationModal.deleteMessage\")), /*#__PURE__*/React.createElement(UserModal, {\n    open: userModalOpen,\n    onClose: handleCloseUserModal,\n    \"aria-labelledby\": \"form-dialog-title\",\n    userId: selectedUser && selectedUser.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }\n  }), loggedInUser.profile === \"user\" ? /*#__PURE__*/React.createElement(ForbiddenPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MainHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }\n  }, i18n.t(\"users.title\"), \" (\", users.length, \")\"), /*#__PURE__*/React.createElement(MainHeaderButtonsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    placeholder: i18n.t(\"contacts.searchPlaceholder\"),\n    type: \"search\",\n    value: searchParam,\n    onChange: handleSearch,\n    InputProps: {\n      startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(SearchIcon, {\n        style: {\n          color: \"gray\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 23\n        }\n      }))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleOpenUserModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 15\n    }\n  }, i18n.t(\"users.buttons.add\")))), /*#__PURE__*/React.createElement(Paper, {\n    className: classes.mainPaper,\n    variant: \"outlined\",\n    onScroll: handleScroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 19\n    }\n  }, i18n.t(\"users.table.ID\")), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 19\n    }\n  }, i18n.t(\"users.table.status\")), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 19\n    }\n  }, \"Avatar\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 19\n    }\n  }, i18n.t(\"users.table.name\")), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 19\n    }\n  }, i18n.t(\"users.table.email\")), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 19\n    }\n  }, i18n.t(\"users.table.profile\")), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 19\n    }\n  }, i18n.t(\"users.table.startWork\")), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 19\n    }\n  }, i18n.t(\"users.table.endWork\")), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 19\n    }\n  }, i18n.t(\"users.table.actions\")))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, users.map(user => /*#__PURE__*/React.createElement(TableRow, {\n    key: user.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 23\n    }\n  }, user.id), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(UserStatusIcon, {\n    user: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 49\n    }\n  })), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.avatarDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 25\n    }\n  }, renderProfileImage(user))), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 23\n    }\n  }, user.name), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 23\n    }\n  }, user.email), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 23\n    }\n  }, user.profile), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 23\n    }\n  }, user.startWork), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 23\n    }\n  }, user.endWork), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    onClick: () => handleEditUser(user),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(EditIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 27\n    }\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    onClick: e => {\n      setConfirmModalOpen(true);\n      setDeletingUser(user);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(DeleteOutlineIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 27\n    }\n  }))))), loadingMore && /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    colSpan: 9,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 25\n    }\n  })))))), loading && !loadingMore && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.loadingContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.loadingText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 17\n    }\n  }, i18n.t(\"loading\"))))));\n};\nexport default Users;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","toast","makeStyles","Paper","Button","Table","TableBody","TableCell","TableHead","TableRow","IconButton","SearchIcon","TextField","InputAdornment","CircularProgress","DeleteOutlineIcon","EditIcon","AccountCircle","MainContainer","MainHeader","MainHeaderButtonsWrapper","Title","whatsappIcon","api","i18n","TableRowSkeleton","UserModal","ConfirmationModal","toastError","SocketContext","socketManager","UserStatusIcon","getBackendUrl","AuthContext","Avatar","ForbiddenPage","backendUrl","reducer","state","action","type","users","payload","newUsers","forEach","user","userIndex","findIndex","u","id","push","userId","splice","useStyles","theme","mainPaper","flex","padding","spacing","overflowY","scrollbarStyles","userAvatar","width","height","avatarDiv","display","alignItems","justifyContent","loadingContainer","loadingText","marginLeft","Users","classes","loading","setLoading","loadingMore","setLoadingMore","pageNumber","setPageNumber","hasMore","setHasMore","selectedUser","setSelectedUser","deletingUser","setDeletingUser","userModalOpen","setUserModalOpen","confirmModalOpen","setConfirmModalOpen","searchParam","setSearchParam","dispatch","loggedInUser","socket","profileImage","fetchUsers","data","get","params","err","companyId","onCompanyUser","on","off","handleOpenUserModal","handleCloseUserModal","handleSearch","event","target","value","toLowerCase","handleEditUser","handleDeleteUser","delete","success","t","loadMore","prevPage","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","renderProfileImage","createElement","src","alt","name","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","title","open","onClose","onConfirm","profile","Fragment","length","placeholder","onChange","InputProps","startAdornment","position","style","color","variant","onClick","onScroll","size","align","map","key","email","startWork","endWork","colSpan"],"sources":["/workspaces/simao/whaticket/frontend/src/pages/Users/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport { AccountCircle } from \"@material-ui/icons\";\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport Title from \"../../components/Title\";\nimport whatsappIcon from '../../assets/nopicture.png'\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport UserModal from \"../../components/UserModal\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport toastError from \"../../errors/toastError\";\nimport { SocketContext, socketManager } from \"../../context/Socket/SocketContext\";\nimport UserStatusIcon from \"../../components/UserModal/statusIcon\";\nimport { getBackendUrl } from \"../../config\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { Avatar } from \"@material-ui/core\";\nimport ForbiddenPage from \"../../components/ForbiddenPage\";\n\nconst backendUrl = getBackendUrl();\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_USERS\") {\n    const users = action.payload;\n    const newUsers = [];\n\n    users.forEach((user) => {\n      const userIndex = state.findIndex((u) => u.id === user.id);\n      if (userIndex !== -1) {\n        state[userIndex] = user;\n      } else {\n        newUsers.push(user);\n      }\n    });\n\n    return [...state, ...newUsers];\n  }\n\n  if (action.type === \"UPDATE_USERS\") {\n    const user = action.payload;\n    const userIndex = state.findIndex((u) => u.id === user.id);\n\n    if (userIndex !== -1) {\n      state[userIndex] = user;\n      return [...state];\n    } else {\n      return [user, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_USER\") {\n    const userId = action.payload;\n\n    const userIndex = state.findIndex((u) => u.id === userId);\n    if (userIndex !== -1) {\n      state.splice(userIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(2),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n  userAvatar: {\n    width: theme.spacing(6),\n    height: theme.spacing(6),\n  },\n  avatarDiv: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  loadingContainer: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: theme.spacing(3),\n  },\n  loadingText: {\n    marginLeft: theme.spacing(2),\n  },\n}));\n\nconst Users = () => {\n  const classes = useStyles();\n\n  const [loading, setLoading] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [deletingUser, setDeletingUser] = useState(null);\n  const [userModalOpen, setUserModalOpen] = useState(false);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [users, dispatch] = useReducer(reducer, []);\n  const { user: loggedInUser, socket } = useContext(AuthContext)\n  const { profileImage } = loggedInUser;\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam]);\n\n  useEffect(() => {\n    setLoading(true);\n    const fetchUsers = async () => {\n      try {\n        const { data } = await api.get(\"/users/\", {\n          params: { searchParam, pageNumber },\n        });\n        dispatch({ type: \"LOAD_USERS\", payload: data.users });\n        setHasMore(data.hasMore);\n      } catch (err) {\n        toastError(err);\n      } finally {\n        setLoading(false);\n        setLoadingMore(false);\n      }\n    };\n    fetchUsers();\n  }, [searchParam, pageNumber]);\n\n  useEffect(() => {\n    if (loggedInUser) {\n      const companyId = loggedInUser.companyId;\n      const onCompanyUser = (data) => {\n        if (data.action === \"update\" || data.action === \"create\") {\n          dispatch({ type: \"UPDATE_USERS\", payload: data.user });\n        }\n        if (data.action === \"delete\") {\n          dispatch({ type: \"DELETE_USER\", payload: +data.userId });\n        }\n      };\n      socket.on(`company-${companyId}-user`, onCompanyUser);\n      return () => {\n        socket.off(`company-${companyId}-user`, onCompanyUser);\n      };\n    }\n  }, [socket]);\n\n  const handleOpenUserModal = () => {\n    setSelectedUser(null);\n    setUserModalOpen(true);\n  };\n\n  const handleCloseUserModal = () => {\n    setSelectedUser(null);\n    setUserModalOpen(false);\n  };\n\n  const handleSearch = (event) => {\n    setSearchParam(event.target.value.toLowerCase());\n  };\n\n  const handleEditUser = (user) => {\n    setSelectedUser(user);\n    setUserModalOpen(true);\n  };\n\n  const handleDeleteUser = async (userId) => {\n    try {\n      await api.delete(`/users/${userId}`);\n      toast.success(i18n.t(\"users.toasts.deleted\"));\n    } catch (err) {\n      toastError(err);\n    }\n    setDeletingUser(null);\n    setSearchParam(\"\");\n    setPageNumber(1);\n  };\n\n  const loadMore = () => {\n    setLoadingMore(true);\n    setPageNumber((prevPage) => prevPage + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  const renderProfileImage = (user) => {\n    if (user.id === loggedInUser.id) {\n      return (\n        <Avatar\n          src={`${backendUrl}/public/company${user.companyId}/user/${profileImage ? profileImage : whatsappIcon}`}\n          alt={user.name}\n          className={classes.userAvatar}\n        />\n      )\n    }\n    if (user.id !== loggedInUser.id) {\n      return (\n        <Avatar\n          src={user.profileImage ? `${backendUrl}/public/company${user.companyId}/user/${user.profileImage}` : whatsappIcon}\n          alt={user.name}\n          className={classes.userAvatar}\n        />\n      )\n    }\n    return (\n      <AccountCircle />\n    )\n  };\n\n  return (\n    <MainContainer>\n      <ConfirmationModal\n        title={\n          deletingUser &&\n          `${i18n.t(\"users.confirmationModal.deleteTitle\")} ${deletingUser.name\n          }?`\n        }\n        open={confirmModalOpen}\n        onClose={() => setConfirmModalOpen(false)}\n        onConfirm={() => handleDeleteUser(deletingUser.id)}\n      >\n        {i18n.t(\"users.confirmationModal.deleteMessage\")}\n      </ConfirmationModal>\n      <UserModal\n        open={userModalOpen}\n        onClose={handleCloseUserModal}\n        aria-labelledby=\"form-dialog-title\"\n        userId={selectedUser && selectedUser.id}\n      />\n      {loggedInUser.profile === \"user\" ?\n        <ForbiddenPage />\n        :\n        <>\n          <MainHeader>\n            <Title>{i18n.t(\"users.title\")} ({users.length})</Title>\n            <MainHeaderButtonsWrapper>\n              <TextField\n                placeholder={i18n.t(\"contacts.searchPlaceholder\")}\n                type=\"search\"\n                value={searchParam}\n                onChange={handleSearch}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <SearchIcon style={{ color: \"gray\" }} />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleOpenUserModal}\n              >\n                {i18n.t(\"users.buttons.add\")}\n              </Button>\n            </MainHeaderButtonsWrapper>\n          </MainHeader>\n          <Paper\n            className={classes.mainPaper}\n            variant=\"outlined\"\n            onScroll={handleScroll}\n          >\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell align=\"center\">{i18n.t(\"users.table.ID\")}</TableCell>\n                  <TableCell align=\"center\">{i18n.t(\"users.table.status\")}</TableCell>\n                  <TableCell align=\"center\">\n                    Avatar\n                  </TableCell>\n                  <TableCell align=\"center\">{i18n.t(\"users.table.name\")}</TableCell>\n                  <TableCell align=\"center\">{i18n.t(\"users.table.email\")}</TableCell>\n                  <TableCell align=\"center\">{i18n.t(\"users.table.profile\")}</TableCell>\n                  <TableCell align=\"center\">{i18n.t(\"users.table.startWork\")}</TableCell>\n                  <TableCell align=\"center\">{i18n.t(\"users.table.endWork\")}</TableCell>\n                  <TableCell align=\"center\">{i18n.t(\"users.table.actions\")}</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                <>\n                  {users.map((user) => (\n                    <TableRow key={user.id}>\n                      <TableCell align=\"center\">{user.id}</TableCell>\n                      <TableCell align=\"center\"><UserStatusIcon user={user} /></TableCell>\n                      <TableCell align=\"center\" >\n                        <div className={classes.avatarDiv}>\n                          {renderProfileImage(user)}\n                        </div>\n                      </TableCell>\n                      <TableCell align=\"center\">{user.name}</TableCell>\n                      <TableCell align=\"center\">{user.email}</TableCell>\n                      <TableCell align=\"center\">{user.profile}</TableCell>\n                      <TableCell align=\"center\">{user.startWork}</TableCell>\n                      <TableCell align=\"center\">{user.endWork}</TableCell>\n                      <TableCell align=\"center\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleEditUser(user)}\n                        >\n                          <EditIcon />\n                        </IconButton>\n\n                        <IconButton\n                          size=\"small\"\n                          onClick={(e) => {\n                            setConfirmModalOpen(true);\n                            setDeletingUser(user);\n                          }}\n                        >\n                          <DeleteOutlineIcon />\n                        </IconButton>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                  {loadingMore && (\n                    <TableRow>\n                      <TableCell colSpan={9} align=\"center\">\n                        <CircularProgress />\n                      </TableCell>\n                    </TableRow>\n                  )}\n                </>\n              </TableBody>\n            </Table>\n            {loading && !loadingMore && (\n              <div className={classes.loadingContainer}>\n                <CircularProgress />\n                <span className={classes.loadingText}>{i18n.t(\"loading\")}</span>\n              </div>\n            )}\n          </Paper>\n        </>\n      }\n    </MainContainer>\n  );\n};\n\nexport default Users;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}