{"ast":null,"code":"var _jsxFileName = \"/workspaces/simao/whaticket/frontend/src/components/FlowBuilderSingleBlockModal/index.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport * as Yup from \"yup\";\nimport { Formik, FieldArray, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Compressor from \"compressorjs\";\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { Checkbox, FormControl, InputLabel, MenuItem, Select, Stack, Typography } from \"@mui/material\";\nimport { AccessTime, AddCircle, Delete, Image, KeyboardArrowDown, KeyboardArrowUp, Message, MicNone, Videocam } from \"@mui/icons-material\";\nimport { capitalize } from \"../../utils/capitalize\";\nimport { Box, Divider } from \"@material-ui/core\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  textField: {\n    marginRight: theme.spacing(1),\n    flex: 1\n  },\n  extraAttr: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  btnWrapper: {\n    position: \"relative\"\n  },\n  buttonProgress: {\n    color: green[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12\n  }\n}));\nconst FlowBuilderSingleBlockModal = ({\n  open,\n  onSave,\n  onUpdate,\n  data,\n  close\n}) => {\n  const classes = useStyles();\n  const isMounted = useRef(true);\n  const [activeModal, setActiveModal] = useState(false);\n  const [rule, setRule] = useState();\n  const [medias, setMedias] = useState([]);\n  const [textDig, setTextDig] = useState();\n  const [elements, setElements] = useState([]);\n  const [elementsSeq, setElementsSeq] = useState([]);\n  const [elementsSeqEdit, setElementsSeqEdit] = useState([]);\n  const [elementsEdit, setElementsEdit] = useState([]);\n  const [numberMessages, setNumberMessages] = useState(0);\n  const [numberMessagesLast, setNumberMessagesLast] = useState(0);\n  const [numberInterval, setNumberInterval] = useState(0);\n  const [numberIntervalLast, setNumberIntervalLast] = useState(0);\n  const [numberAudio, setNumberAudio] = useState(0);\n  const [numberAudioLast, setNumberAudioLast] = useState(0);\n  const [numberVideo, setNumberVideo] = useState(0);\n  const [numberVideoLast, setNumberVideoLast] = useState(0);\n  const [numberImg, setNumberImg] = useState(0);\n  const [numberImgLast, setNumberImgLast] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [previewImg, setPreviewImg] = useState([]);\n  const [previewAudios, setPreviewAudios] = useState([]);\n  const [previewVideos, setPreviewVideos] = useState([]);\n  const [arrayOption, setArrayOption] = useState([]);\n  const [variables, setVariables] = useState([]);\n  const [labels, setLabels] = useState({\n    title: \"Adicionar conteúdo ao fluxo\",\n    btn: \"Adicionar\"\n  });\n  const handleElements = newNameFiles => {\n    let elementsSequence = [];\n    const newArrMessage = elementsSeq.filter(item => item.includes(\"message\"));\n    const newArrInterval = elementsSeq.filter(item => item.includes(\"interval\"));\n    const newArrImg = elementsSeq.filter(item => item.includes(\"img\"));\n    const newArrAudio = elementsSeq.filter(item => item.includes(\"audio\"));\n    const newArrVideo = elementsSeq.filter(item => item.includes(\"video\"));\n\n    //Todas as mensagens\n    for (let i = 0; i < numberMessages; i++) {\n      const value = document.querySelector(`.${newArrMessage[i]}`).querySelector(\".MuiInputBase-input\").value;\n      if (!value) {\n        toast.error(\"Campos de mensagem vazio!\");\n        setLoading(false);\n        throw \"\";\n      }\n      elementsSequence.push({\n        type: \"message\",\n        value: value,\n        number: newArrMessage[i]\n      });\n      console.log(\"text\");\n    }\n    //Todos os intervalos\n    for (let i = 0; i < numberInterval; i++) {\n      const value = document.querySelector(`.${newArrInterval[i]}`).querySelector(\".MuiInputBase-input\").value;\n      if (parseInt(value) === 0 || parseInt(value) > 120) {\n        toast.error(\"Intervalo não pode ser 0 ou maior que 120!\");\n        setLoading(false);\n        throw \"\";\n      }\n      elementsSequence.push({\n        type: \"interval\",\n        value: value,\n        number: newArrInterval[i]\n      });\n      console.log(\"int\");\n    }\n\n    //Todas as imagens\n    for (let i = 0; i < numberImg; i++) {\n      const onlyImg = newNameFiles !== null && newNameFiles.filter(file => file.includes(\"png\") || file.includes(\"jpg\") || file.includes(\"jpeg\"));\n      const onlyImgNameOriginal = medias.filter(file => file.name.includes(\"png\") || file.name.includes(\"jpg\") || file.name.includes(\"jpeg\"));\n      if (elementsSeqEdit.includes(newArrImg[i])) {\n        const itemSelectedEdit = elementsEdit.filter(item => item.number === newArrImg[i])[0];\n        elementsSequence.push({\n          type: \"img\",\n          value: itemSelectedEdit.value,\n          original: itemSelectedEdit.original,\n          number: itemSelectedEdit.number\n        });\n      } else {\n        let indexElem = 0;\n        if (elementsSeqEdit.filter(item => item.includes(\"img\")).length > 0) {\n          indexElem = elementsSeqEdit.filter(item => item.includes(\"img\")).length - i;\n        } else {\n          indexElem = i;\n        }\n        elementsSequence.push({\n          type: \"img\",\n          value: onlyImg[indexElem],\n          original: onlyImgNameOriginal[indexElem].name,\n          number: newArrImg[i]\n        });\n      }\n    }\n    //Todos os audios\n    for (let i = 0; i < numberAudio; i++) {\n      const onlyAudio = newNameFiles !== null && newNameFiles.filter(file => file.includes(\"mp3\") || file.includes(\"ogg\") || file.includes(\"mpeg\") || file.includes(\"opus\"));\n      const onlyAudioNameOriginal = medias.filter(file => file.name.includes(\"mp3\") || file.name.includes(\"ogg\") || file.name.includes(\"mpeg\") || file.name.includes(\"opus\"));\n      if (elementsSeqEdit.includes(newArrAudio[i])) {\n        const itemSelectedEdit = elementsEdit.filter(item => item.number === newArrAudio[i])[0];\n        elementsSequence.push({\n          type: \"audio\",\n          value: itemSelectedEdit.value,\n          original: itemSelectedEdit.original,\n          number: itemSelectedEdit.number,\n          record: document.querySelector(`.check${newArrAudio[i]}`).querySelector(\".PrivateSwitchBase-input\").checked\n        });\n      } else {\n        let indexElem = 0;\n        if (elementsSeqEdit.filter(item => item.includes(\"audio\")).length > 0) {\n          indexElem = elementsSeqEdit.filter(item => item.includes(\"audio\")).length - i;\n        } else {\n          indexElem = i;\n        }\n        elementsSequence.push({\n          type: \"audio\",\n          value: onlyAudio[indexElem],\n          original: onlyAudioNameOriginal[indexElem].name,\n          number: newArrAudio[i],\n          record: document.querySelector(`.check${newArrAudio[i]}`).querySelector(\".PrivateSwitchBase-input\").checked\n        });\n      }\n    }\n    //Todos os videos\n    for (let i = 0; i < numberVideo; i++) {\n      const onlyVideo = newNameFiles !== null && newNameFiles.filter(file => file.includes(\"mp4\") || file.includes(\"avi\"));\n      const onlyVideoNameOriginal = medias.filter(file => file.name.includes(\"mp4\") || file.name.includes(\"avi\"));\n      if (elementsSeqEdit.includes(newArrVideo[i])) {\n        const itemSelectedEdit = elementsEdit.filter(item => item.number === newArrVideo[i])[0];\n        elementsSequence.push({\n          type: \"video\",\n          value: itemSelectedEdit.value,\n          original: itemSelectedEdit.original,\n          number: itemSelectedEdit.number\n        });\n      } else {\n        let indexElem = 0;\n        if (elementsSeqEdit.filter(item => item.includes(\"video\")).length > 0) {\n          indexElem = elementsSeqEdit.filter(item => item.includes(\"video\")).length - i;\n        } else {\n          indexElem = i;\n        }\n        elementsSequence.push({\n          type: \"video\",\n          value: onlyVideo[indexElem],\n          original: onlyVideoNameOriginal[indexElem].name,\n          number: newArrVideo[i]\n        });\n      }\n    }\n    console.log(elementsSequence);\n    return elementsSequence;\n  };\n  const deleteElementsTypeOne = (id, type) => {\n    if (type === \"message\") {\n      setNumberMessages(old => old - 1);\n      setElementsSeq(old => old.filter(item => item !== `message${id}`));\n      setElementsSeqEdit(old => old.filter(item => item !== `message${id}`));\n      document.querySelector(`.stackMessage${id}`).remove();\n    }\n    if (type === \"interval\") {\n      setNumberInterval(old => old - 1);\n      setElementsSeq(old => old.filter(item => item !== `interval${id}`));\n      setElementsSeqEdit(old => old.filter(item => item !== `interval${id}`));\n      document.querySelector(`.stackInterval${id}`).remove();\n    }\n    if (type === \"img\") {\n      setNumberImg(old => old - 1);\n      setPreviewImg(old => {\n        setMedias(oldMedia => {\n          try {\n            return oldMedia.filter(mediaItem => mediaItem.name !== old.filter(item => item.number === id)[0].name);\n          } catch (e) {\n            return oldMedia;\n          }\n        });\n        return old.filter(item => item.number !== id);\n      });\n      setElementsSeq(old => old.filter(item => item !== `img${id}`));\n      setElementsSeqEdit(old => old.filter(item => item !== `img${id}`));\n      document.querySelector(`.stackImg${id}`).remove();\n    }\n    if (type === \"audio\") {\n      setNumberAudio(old => old - 1);\n      setPreviewAudios(old => {\n        setMedias(oldMedia => {\n          try {\n            return oldMedia.filter(mediaItem => mediaItem.name !== old.filter(item => item.number === id)[0].name);\n          } catch (e) {\n            return oldMedia;\n          }\n        });\n        return old.filter(item => item.number !== id);\n      });\n      setElementsSeq(old => old.filter(item => item !== `audio${id}`));\n      setElementsSeqEdit(old => old.filter(item => item !== `audio${id}`));\n      document.querySelector(`.stackAudio${id}`).remove();\n    }\n    if (type === \"video\") {\n      setNumberVideo(old => old - 1);\n      setPreviewVideos(old => {\n        setMedias(oldMedia => {\n          try {\n            return oldMedia.filter(mediaItem => mediaItem.name !== old.filter(item => item.number === id)[0].name);\n          } catch (e) {\n            return oldMedia;\n          }\n        });\n        return old.filter(item => item.number !== id);\n      });\n      setElementsSeq(old => old.filter(item => item !== `video${id}`));\n      setElementsSeqEdit(old => old.filter(item => item !== `video${id}`));\n      document.querySelector(`.stackVideo${id}`).remove();\n    }\n  };\n  const moveElementDown = id => {\n    setElementsSeq(old => {\n      const array = old;\n      const index = array.indexOf(id);\n      moveItemParaFrente(index);\n      console.log(\"id\", id);\n      if (index !== -1 && index < array.length - 1) {\n        // Verifica se o elemento foi encontrado no array e não está na última posição\n        const novoArray = [...array]; // Cria uma cópia do array original\n        const elementoMovido = novoArray.splice(index, 1)[0];\n        novoArray.splice(index + 1, 0, elementoMovido);\n        return novoArray;\n      }\n      return array;\n    });\n  };\n  const moveElementUp = id => {\n    setElementsSeq(old => {\n      const array = old;\n      const index = array.indexOf(id);\n      moveItemParaTras(index);\n      if (index !== -1 && index > 0) {\n        // Verifica se o elemento foi encontrado no array e não está na primeira posição\n        const novoArray = [...array]; // Cria uma cópia do array original\n        const elementoMovido = novoArray.splice(index, 1)[0];\n        novoArray.splice(index - 1, 0, elementoMovido);\n        return novoArray;\n      }\n      return array;\n    });\n  };\n  function moveItemParaFrente(posicao) {\n    setElements(old => {\n      const array = old;\n      if (posicao >= 0 && posicao < array.length - 1) {\n        const novoArray = [...array]; // Cria uma cópia do array original\n        const elementoMovido = novoArray.splice(posicao, 1)[0];\n        novoArray.splice(posicao + 1, 0, elementoMovido);\n        return novoArray;\n      }\n      return array; // Retorna o array original se a movimentação não for possível\n    });\n  }\n  function moveItemParaTras(posicao) {\n    setElements(old => {\n      const array = old;\n      if (posicao > 0 && posicao < array.length) {\n        const novoArray = [...array]; // Cria uma cópia do array original\n        const elementoMovido = novoArray.splice(posicao, 1)[0];\n        novoArray.splice(posicao - 1, 0, elementoMovido);\n        return novoArray;\n      }\n      return array; // Retorna o array original se a movimentação não for possível\n    });\n  }\n  const handleChangeMediasImg = (e, number) => {\n    if (!e.target.files) {\n      return;\n    }\n    if (e.target.files[0].size > 2000000) {\n      toast.error(\"Arquivo é muito grande! 2MB máximo\");\n      return;\n    }\n    const imgBlob = URL.createObjectURL(e.target.files[0]);\n    setPreviewImg(old => [...old, {\n      number: number,\n      url: imgBlob,\n      name: e.target.files[0].name\n    }]);\n    const selectedMedias = Array.from(e.target.files);\n    setMedias(old => [...old, selectedMedias[0]]);\n    document.querySelector(`.img${number}`).src = imgBlob;\n    document.querySelector(`.btnImg${number}`).remove();\n  };\n  const handleChangeAudios = (e, number) => {\n    if (!e.target.files) {\n      return;\n    }\n    if (e.target.files[0].size > 5000000) {\n      toast.error(\"Arquivo é muito grande! 5MB máximo\");\n      return;\n    }\n    const audioBlob = URL.createObjectURL(e.target.files[0]);\n    setPreviewAudios(old => [...old, {\n      number: number,\n      url: audioBlob,\n      name: e.target.files[0].name\n    }]);\n    const selectedMedias = Array.from(e.target.files);\n    setMedias(old => [...old, selectedMedias[0]]);\n    document.querySelector(`.audio${number}`).innerHTML = `<audio controls=\"controls\">\n    <source src=\"${audioBlob}\" type=\"audio/mp3\" />\n    seu navegador não suporta HTML5\n  </audio>`;\n    document.querySelector(`.btnAudio${number}`).remove();\n  };\n  const handleChangeVideos = (e, number) => {\n    if (!e.target.files) {\n      return;\n    }\n    if (e.target.files[0].size > 20000000) {\n      toast.error(\"Arquivo é muito grande! 20MB máximo\");\n      return;\n    }\n    const videoBlob = URL.createObjectURL(e.target.files[0]);\n    setPreviewVideos(old => [...old, {\n      number: number,\n      url: videoBlob,\n      name: e.target.files[0].name\n    }]);\n    var divConteudo = document.createElement(\"div\");\n    const selectedMedias = Array.from(e.target.files);\n    setMedias(old => [...old, selectedMedias[0]]);\n    divConteudo.innerHTML = `<video controls=\"controls\" style=\"width: 200px;\">\n    <source src=\"${videoBlob}\" type=\"video/mp4\" />\n    seu navegador não suporta HTML5\n  </video>`;\n    document.querySelector(`.video${number}`).appendChild(divConteudo);\n    document.querySelector(`.btnVideo${number}`).remove();\n  };\n  const imgLayout = (number, valueDefault = \"\") => {\n    return /*#__PURE__*/React.createElement(Stack, {\n      sx: {\n        border: \"1px solid #0000FF\",\n        borderRadius: \"7px\",\n        padding: \"6px\",\n        position: \"relative\"\n      },\n      className: `stackImg${number}`,\n      key: `stackImg${number}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Stack, {\n      sx: {\n        position: \"absolute\",\n        right: 6\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Delete, {\n      onClick: () => deleteElementsTypeOne(number, \"img\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Typography, {\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 9\n      }\n    }, \"Imagem\"), /*#__PURE__*/React.createElement(Stack, {\n      direction: \"row\",\n      justifyContent: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: valueDefault.length > 0 ? process.env.REACT_APP_BACKEND_URL + \"/public/\" + valueDefault : \"\",\n      className: `img${number}`,\n      style: {\n        width: \"200px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 11\n      }\n    })), valueDefault.length === 0 && /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      component: \"label\",\n      className: `btnImg${number}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 11\n      }\n    }, \"Enviar imagem\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      accept: \"image/png, image/jpg, image/jpeg\",\n      hidden: true,\n      onChange: e => handleChangeMediasImg(e, number),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 13\n      }\n    })));\n  };\n  const audioLayout = (number, valueDefault = \"\", valueRecordDefault = \"\") => {\n    return /*#__PURE__*/React.createElement(Stack, {\n      sx: {\n        border: \"1px solid #0000FF\",\n        borderRadius: \"7px\",\n        padding: \"6px\",\n        position: \"relative\"\n      },\n      className: `stackAudio${number}`,\n      key: `stackAudio${number}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Stack, {\n      sx: {\n        position: \"absolute\",\n        right: 6\n      },\n      direction: \"row\",\n      gap: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Delete, {\n      sx: {\n        cursor: \"pointer\"\n      },\n      onClick: () => deleteElementsTypeOne(number, \"audio\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Typography, {\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 9\n      }\n    }, \"Audio\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: `audio${number}`,\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 9\n      }\n    }, valueDefault.length > 0 && /*#__PURE__*/React.createElement(\"audio\", {\n      controls: \"controls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 645,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"source\", {\n      src: process.env.REACT_APP_BACKEND_URL + \"/public/\" + valueDefault,\n      type: \"audio/mp3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 15\n      }\n    }), \"seu navegador n\\xE3o suporta HTML5\")), valueDefault.length === 0 && /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      component: \"label\",\n      className: `btnAudio${number}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 11\n      }\n    }, \"Enviar audio\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      accept: \"audio/ogg, audio/mp3, audio/opus\",\n      hidden: true,\n      onChange: e => handleChangeAudios(e, number),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Stack, {\n      direction: \"row\",\n      justifyContent: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      className: `checkaudio${number}`,\n      defaultChecked: valueRecordDefault === \"ok\" ? false : true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Stack, {\n      justifyContent: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 676,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 13\n      }\n    }, \"Enviar como audio gravado na hora\"))));\n  };\n  const videoLayout = (number, valueDefault = \"\") => {\n    return /*#__PURE__*/React.createElement(Stack, {\n      sx: {\n        border: \"1px solid #0000FF\",\n        borderRadius: \"7px\",\n        padding: \"6px\",\n        position: \"relative\"\n      },\n      className: `stackVideo${number}`,\n      key: `stackVideo${number}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Stack, {\n      sx: {\n        position: \"absolute\",\n        right: 6\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 696,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Delete, {\n      onClick: () => deleteElementsTypeOne(number, \"video\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 697,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Typography, {\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 699,\n        columnNumber: 9\n      }\n    }, \"Video\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: `video${number}`,\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 700,\n        columnNumber: 9\n      }\n    }, valueDefault.length > 0 && /*#__PURE__*/React.createElement(\"video\", {\n      controls: \"controls\",\n      style: {\n        width: \"200px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 709,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"source\", {\n      src: process.env.REACT_APP_BACKEND_URL + \"/public/\" + valueDefault,\n      type: \"video/mp4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 710,\n        columnNumber: 15\n      }\n    }), \"seu navegador n\\xE3o suporta HTML5\")), valueDefault.length === 0 && /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      component: \"label\",\n      className: `btnVideo${number}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 721,\n        columnNumber: 11\n      }\n    }, \"Enviar video\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      accept: \"video/mp4\",\n      hidden: true,\n      onChange: e => handleChangeVideos(e, number),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 13\n      }\n    })));\n  };\n  const messageLayout = (number, valueDefault = \"\") => {\n    return /*#__PURE__*/React.createElement(Stack, {\n      sx: {\n        border: \"1px solid #0000FF\",\n        borderRadius: \"7px\",\n        padding: \"6px\",\n        position: \"relative\"\n      },\n      className: `stackMessage${number}`,\n      key: `stackMessage${number}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Stack, {\n      sx: {\n        position: \"absolute\",\n        right: 6\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Delete, {\n      onClick: () => deleteElementsTypeOne(number, \"message\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Typography, {\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 754,\n        columnNumber: 9\n      }\n    }, \"Texto\"), /*#__PURE__*/React.createElement(TextField, {\n      label: \"Mensagem\",\n      defaultValue: valueDefault,\n      multiline: true,\n      rows: 7,\n      className: `message${number}`,\n      name: \"text\",\n      variant: \"outlined\",\n      margin: \"dense\",\n      style: {\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 9\n      }\n    }));\n  };\n  const intervalLayout = (number, valueDefault = 0) => {\n    return /*#__PURE__*/React.createElement(Stack, {\n      sx: {\n        border: \"1px solid #0000FF\",\n        borderRadius: \"7px\",\n        padding: \"6px\",\n        position: \"relative\"\n      },\n      className: `stackInterval${number}`,\n      key: `stackInterval${number}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 772,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Stack, {\n      sx: {\n        position: \"absolute\",\n        right: 6\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 782,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Delete, {\n      onClick: () => deleteElementsTypeOne(number, \"interval\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Typography, {\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 785,\n        columnNumber: 9\n      }\n    }, \"Intervalo\"), /*#__PURE__*/React.createElement(TextField, {\n      label: \"Tempo em segundos\",\n      className: `interval${number}`,\n      defaultValue: valueDefault,\n      type: \"number\",\n      InputProps: {\n        inputProps: {\n          min: 0,\n          max: 120\n        }\n      },\n      variant: \"outlined\",\n      margin: \"dense\",\n      style: {\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 786,\n        columnNumber: 9\n      }\n    }));\n  };\n  useEffect(() => {\n    const localVariables = localStorage.getItem(\"variables\");\n    if (localVariables) {\n      setVariables(JSON.parse(localVariables));\n    }\n    if (open === \"edit\") {\n      setLabels({\n        title: \"Editar conteúdo\",\n        btn: \"Salvar\"\n      });\n      setElementsSeq(data.data.seq);\n      setElementsSeqEdit(data.data.seq);\n      setElementsEdit(data.data.elements);\n      if (data) {\n        const elementsEditLoc = data.data.elements;\n        const sequence = data.data.seq;\n        sequence.map(item => {\n          const itemNode = elementsEditLoc.filter(inode => inode.number === item)[0];\n          if (itemNode.type === \"message\") {\n            const numberLoc = parseInt(item.replace(\"message\", \"\"));\n            setElements(elm => [...elm, messageLayout(numberLoc, itemNode.value)]);\n            setNumberMessages(old => {\n              const arsOnly = sequence.filter(item => item.includes(\"message\"));\n              const arrNumberMax = arsOnly.map(item => parseInt(item.replace(\"message\", \"\")));\n              setNumberMessagesLast(Math.max.apply(null, arrNumberMax) + 1);\n              return old + 1;\n            });\n          }\n          if (itemNode.type === \"interval\") {\n            const numberLoc = parseInt(item.replace(\"interval\", \"\"));\n            setElements(elm => [...elm, intervalLayout(numberLoc, itemNode.value)]);\n            setNumberInterval(old => {\n              const arsOnly = sequence.filter(item => item.includes(\"interval\"));\n              const arrNumberMax = arsOnly.map(item => parseInt(item.replace(\"interval\", \"\")));\n              setNumberIntervalLast(Math.max.apply(null, arrNumberMax) + 1);\n              return old + 1;\n            });\n          }\n          if (itemNode.type === \"audio\") {\n            const numberLoc = parseInt(item.replace(\"audio\", \"\"));\n            setElements(elm => [...elm, audioLayout(numberLoc, itemNode.value, itemNode.record ? \"\" : \"ok\")]);\n            setNumberAudio(old => {\n              const arsOnly = sequence.filter(item => item.includes(\"audio\"));\n              const arrNumberMax = arsOnly.map(item => parseInt(item.replace(\"audio\", \"\")));\n              setNumberAudioLast(Math.max.apply(null, arrNumberMax) + 1);\n              return old + 1;\n            });\n          }\n          if (itemNode.type === \"img\") {\n            const numberLoc = parseInt(item.replace(\"img\", \"\"));\n            setElements(elm => [...elm, imgLayout(numberLoc, itemNode.value)]);\n            setNumberImg(old => {\n              const arsOnly = sequence.filter(item => item.includes(\"img\"));\n              const arrNumberMax = arsOnly.map(item => parseInt(item.replace(\"img\", \"\")));\n              setNumberImgLast(Math.max.apply(null, arrNumberMax) + 1);\n              return old + 1;\n            });\n          }\n          if (itemNode.type === \"video\") {\n            const numberLoc = parseInt(item.replace(\"video\", \"\"));\n            setElements(elm => [...elm, videoLayout(numberLoc, itemNode.value)]);\n            setNumberVideo(old => {\n              const arsOnly = sequence.filter(item => item.includes(\"video\"));\n              const arrNumberMax = arsOnly.map(item => parseInt(item.replace(\"video\", \"\")));\n              setNumberVideoLast(Math.max.apply(null, arrNumberMax) + 1);\n              return old + 1;\n            });\n          }\n        });\n      }\n      setActiveModal(true);\n    }\n    if (open === \"create\") {\n      setLabels({\n        title: \"Adicionar menu ao fluxo\",\n        btn: \"Adicionar\"\n      });\n      setTextDig();\n      setArrayOption([]);\n      setActiveModal(true);\n    }\n  }, [open]);\n  useEffect(() => {\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  const handleClose = async () => {\n    close(null);\n    setActiveModal(false);\n    setTimeout(() => {\n      setMedias([]);\n      setPreviewImg([]);\n      setPreviewAudios([]);\n      setPreviewVideos([]);\n      setArrayOption([]);\n      setElements([]);\n      setElementsSeq([]);\n      setElementsEdit([]);\n      setElementsSeqEdit([]);\n      setNumberMessages(0);\n      setNumberMessagesLast(0);\n      setNumberInterval(0);\n      setNumberIntervalLast(0);\n      setNumberAudio(0);\n      setNumberAudioLast(0);\n      setNumberVideo(0);\n      setNumberVideoLast(0);\n      setNumberImg(0);\n      setNumberImgLast(0);\n    }, 500);\n  };\n  const verifyButtonsUpload = () => {\n    const newArrImg = elementsSeq.filter(item => item.includes(\"img\"));\n    const newArrAudio = elementsSeq.filter(item => item.includes(\"audio\"));\n    const newArrVideo = elementsSeq.filter(item => item.includes(\"video\"));\n    for (let i = 0; i < numberImg; i++) {\n      const imgVerify = document.querySelector(`.btn${capitalize(newArrImg[i])}`);\n      if (imgVerify) {\n        return true;\n      }\n    }\n    for (let i = 0; i < numberAudio; i++) {\n      const audioVerify = document.querySelector(`.btn${capitalize(newArrAudio[i])}`);\n      if (audioVerify) {\n        return true;\n      }\n    }\n    for (let i = 0; i < numberVideo; i++) {\n      const videoVerify = document.querySelector(`.btn${capitalize(newArrVideo[i])}`);\n      if (videoVerify) {\n        return true;\n      }\n    }\n  };\n  const handleSaveNode = async () => {\n    if (open === \"edit\") {\n      setLoading(true);\n      const formData = new FormData();\n      medias.forEach(async (media, idx) => {\n        const file = media;\n        if (!file) {\n          return;\n        }\n        if ((media === null || media === void 0 ? void 0 : media.type.split(\"/\")[0]) == \"image\") {\n          new Compressor(file, {\n            quality: 0.7,\n            async success(media) {\n              formData.append(\"medias\", media);\n              formData.append(\"body\", media.name);\n            },\n            error(err) {\n              alert(\"erro\");\n              console.log(err.message);\n            }\n          });\n        } else {\n          formData.append(\"medias\", media);\n          formData.append(\"body\", media.name);\n        }\n      });\n      setTimeout(async () => {\n        if (numberAudio === 0 && numberVideo === 0 && numberImg === 0 || medias.length === 0) {\n          try {\n            const mountData = {\n              seq: elementsSeq,\n              elements: handleElements(null)\n            };\n            console.log(\"QUI\", mountData);\n            onUpdate({\n              ...data,\n              data: mountData\n            });\n            toast.success(\"Conteúdo adicionada com sucesso!\");\n            handleClose();\n            setLoading(false);\n            return;\n          } catch (e) {\n            console.log(e);\n            setLoading(false);\n          }\n          return;\n        }\n        const verify = verifyButtonsUpload();\n        if (verify) {\n          setLoading(false);\n          return toast.error(\"Delete os cards vazios(Imagem, Audio e Video)\");\n        }\n        await api.post(\"/flowbuilder/content\", formData).then(async res => {\n          const mountData = {\n            seq: elementsSeq,\n            elements: handleElements(res.data)\n          };\n          onUpdate({\n            ...data,\n            data: mountData\n          });\n          toast.success(\"Conteúdo adicionada com sucesso!\");\n          await handleClose();\n          setLoading(false);\n        }).catch(error => {\n          console.log(error);\n        });\n      }, 1500);\n    } else if (open === \"create\") {\n      setLoading(true);\n      const formData = new FormData();\n      medias.forEach(async (media, idx) => {\n        const file = media;\n        if (!file) {\n          return;\n        }\n        if ((media === null || media === void 0 ? void 0 : media.type.split(\"/\")[0]) == \"image\") {\n          new Compressor(file, {\n            quality: 0.7,\n            async success(media) {\n              formData.append(\"medias\", media);\n              formData.append(\"body\", media.name);\n            },\n            error(err) {\n              alert(\"erro\");\n              console.log(err.message);\n            }\n          });\n        } else {\n          formData.append(\"medias\", media);\n          formData.append(\"body\", media.name);\n        }\n      });\n      setTimeout(async () => {\n        if (numberAudio === 0 && numberVideo === 0 && numberImg === 0) {\n          try {\n            const mountData = {\n              seq: elementsSeq,\n              elements: handleElements(null)\n            };\n            onSave({\n              ...mountData\n            });\n            toast.success(\"Conteúdo adicionada com sucesso!\");\n            handleClose();\n            setLoading(false);\n            return;\n          } catch (e) {\n            setLoading(false);\n          }\n        }\n        const verify = verifyButtonsUpload();\n        if (verify) {\n          setLoading(false);\n          return toast.error(\"Delete os cards vazios(Imagem, Audio e Video)\");\n        }\n        await api.post(\"/flowbuilder/content\", formData).then(res => {\n          const mountData = {\n            seq: elementsSeq,\n            elements: handleElements(res.data)\n          };\n          onSave({\n            ...mountData\n          });\n          toast.success(\"Conteúdo adicionada com sucesso!\");\n          handleClose();\n          setLoading(false);\n        }).catch(error => {\n          console.log(error);\n        });\n      }, 1500);\n    }\n  };\n  const scrollToBottom = className => {\n    const element = document.querySelector(className);\n    element.scrollTop = element.scrollHeight;\n  };\n  const variableFormatter = item => {\n    return \"{{\" + item + \"}}\";\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1150,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Dialog, {\n    open: activeModal,\n    fullWidth: \"md\",\n    scroll: \"paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1151,\n      columnNumber: 7\n    }\n  }, !loading && /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1153,\n      columnNumber: 11\n    }\n  }, \"Adicionar conte\\xFAdo ao fluxo\"), /*#__PURE__*/React.createElement(Stack, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    className: \"body-card\",\n    style: {\n      gap: \"8px\",\n      padding: \"16px\",\n      overflow: \"auto\",\n      height: \"70vh\",\n      scrollBehavior: \"smooth\",\n      display: loading && \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1158,\n      columnNumber: 11\n    }\n  }, elements.map(item => /*#__PURE__*/React.createElement(React.Fragment, null, item)), /*#__PURE__*/React.createElement(Stack, {\n    direction: \"row\",\n    gap: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1172,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => {\n      setElements(old => [...old, messageLayout(numberMessagesLast)]);\n      setNumberMessages(old => {\n        setElementsSeq(oldEleme => [...oldEleme, `message${numberMessagesLast}`]);\n        return old + 1;\n      });\n      setNumberMessagesLast(old => old + 1);\n      setTimeout(() => {\n        scrollToBottom(\".body-card\");\n      }, 100);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1173,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Message, {\n    sx: {\n      width: \"16px\",\n      height: \"16px\",\n      marginRight: \"4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1194,\n      columnNumber: 17\n    }\n  }), \"Texto\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => {\n      setElements(old => [...old, intervalLayout(numberIntervalLast)]);\n      setNumberInterval(old => {\n        setElementsSeq(oldEleme => [...oldEleme, `interval${numberIntervalLast}`]);\n        return old + 1;\n      });\n      setNumberIntervalLast(old => old + 1);\n      setTimeout(() => {\n        scrollToBottom(\".body-card\");\n      }, 100);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1203,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AccessTime, {\n    sx: {\n      width: \"16px\",\n      height: \"16px\",\n      marginRight: \"4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1224,\n      columnNumber: 17\n    }\n  }), \"Intervalo\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => {\n      setElements(old => [...old, imgLayout(numberImgLast)]);\n      setNumberImg(old => {\n        setElementsSeq(oldEleme => [...oldEleme, `img${numberImgLast}`]);\n        return old + 1;\n      });\n      setNumberImgLast(old => old + 1);\n      setTimeout(() => {\n        scrollToBottom(\".body-card\");\n      }, 100);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1233,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    sx: {\n      width: \"16px\",\n      height: \"16px\",\n      marginRight: \"4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1251,\n      columnNumber: 17\n    }\n  }), \"Imagem\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => {\n      setElements(old => [...old, audioLayout(numberAudioLast)]);\n      setNumberAudio(old => {\n        setElementsSeq(oldEleme => [...oldEleme, `audio${numberAudioLast}`]);\n        return old + 1;\n      });\n      setNumberAudioLast(old => old + 1);\n      setTimeout(() => {\n        scrollToBottom(\".body-card\");\n      }, 100);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1260,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MicNone, {\n    sx: {\n      width: \"16px\",\n      height: \"16px\",\n      marginRight: \"4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1278,\n      columnNumber: 17\n    }\n  }), \"Audio\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => {\n      setElements(old => [...old, videoLayout(numberVideoLast)]);\n      setNumberVideo(old => {\n        setElementsSeq(oldEleme => [...oldEleme, `video${numberVideoLast}`]);\n        return old + 1;\n      });\n      setNumberVideoLast(old => old + 1);\n      setTimeout(() => {\n        scrollToBottom(\".body-card\");\n      }, 100);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1287,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Videocam, {\n    sx: {\n      width: \"16px\",\n      height: \"16px\",\n      marginRight: \"4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1305,\n      columnNumber: 17\n    }\n  }), \"Video\")), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1315,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    style: {\n      width: \"100%\",\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1316,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1317,\n      columnNumber: 15\n    }\n  }, \"Vari\\xE1veis\"), variables && /*#__PURE__*/React.createElement(React.Fragment, null, variables.map(item => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1322,\n      columnNumber: 23\n    }\n  }, variableFormatter(item))))))), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1330,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleClose,\n    color: \"secondary\",\n    variant: \"outlined\",\n    style: {\n      display: loading && \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1331,\n      columnNumber: 13\n    }\n  }, i18n.t(\"contactModal.buttons.cancel\")), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: () => handleSaveNode(),\n    style: {\n      display: loading && \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1339,\n      columnNumber: 13\n    }\n  }, `${labels.btn}`))), loading && /*#__PURE__*/React.createElement(Stack, {\n    style: {\n      gap: \"8px\",\n      padding: \"16px\",\n      height: \"70vh\",\n      alignSelf: \"center\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1351,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1360,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1361,\n      columnNumber: 15\n    }\n  }, \"Subindo os arquivos e criando o conte\\xFAdo...\"), /*#__PURE__*/React.createElement(Stack, {\n    style: {\n      alignSelf: \"center\",\n      marginTop: \"12px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1364,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1365,\n      columnNumber: 17\n    }\n  }))))));\n};\nexport default FlowBuilderSingleBlockModal;","map":{"version":3,"names":["React","useState","useEffect","useRef","Yup","Formik","FieldArray","Form","Field","toast","makeStyles","green","Button","TextField","Dialog","DialogActions","DialogContent","DialogTitle","IconButton","DeleteOutlineIcon","CircularProgress","Compressor","i18n","api","toastError","Checkbox","FormControl","InputLabel","MenuItem","Select","Stack","Typography","AccessTime","AddCircle","Delete","Image","KeyboardArrowDown","KeyboardArrowUp","Message","MicNone","Videocam","capitalize","Box","Divider","useStyles","theme","root","display","flexWrap","textField","marginRight","spacing","flex","extraAttr","justifyContent","alignItems","btnWrapper","position","buttonProgress","color","top","left","marginTop","marginLeft","FlowBuilderSingleBlockModal","open","onSave","onUpdate","data","close","classes","isMounted","activeModal","setActiveModal","rule","setRule","medias","setMedias","textDig","setTextDig","elements","setElements","elementsSeq","setElementsSeq","elementsSeqEdit","setElementsSeqEdit","elementsEdit","setElementsEdit","numberMessages","setNumberMessages","numberMessagesLast","setNumberMessagesLast","numberInterval","setNumberInterval","numberIntervalLast","setNumberIntervalLast","numberAudio","setNumberAudio","numberAudioLast","setNumberAudioLast","numberVideo","setNumberVideo","numberVideoLast","setNumberVideoLast","numberImg","setNumberImg","numberImgLast","setNumberImgLast","loading","setLoading","previewImg","setPreviewImg","previewAudios","setPreviewAudios","previewVideos","setPreviewVideos","arrayOption","setArrayOption","variables","setVariables","labels","setLabels","title","btn","handleElements","newNameFiles","elementsSequence","newArrMessage","filter","item","includes","newArrInterval","newArrImg","newArrAudio","newArrVideo","i","value","document","querySelector","error","push","type","number","console","log","parseInt","onlyImg","file","onlyImgNameOriginal","name","itemSelectedEdit","original","indexElem","length","onlyAudio","onlyAudioNameOriginal","record","checked","onlyVideo","onlyVideoNameOriginal","deleteElementsTypeOne","id","old","remove","oldMedia","mediaItem","e","moveElementDown","array","index","indexOf","moveItemParaFrente","novoArray","elementoMovido","splice","moveElementUp","moveItemParaTras","posicao","handleChangeMediasImg","target","files","size","imgBlob","URL","createObjectURL","url","selectedMedias","Array","from","src","handleChangeAudios","audioBlob","innerHTML","handleChangeVideos","videoBlob","divConteudo","createElement","appendChild","imgLayout","valueDefault","sx","border","borderRadius","padding","className","key","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","right","onClick","textAlign","direction","process","env","REACT_APP_BACKEND_URL","style","width","variant","component","accept","hidden","onChange","audioLayout","valueRecordDefault","gap","cursor","flexDirection","controls","defaultChecked","videoLayout","messageLayout","label","defaultValue","multiline","rows","margin","intervalLayout","InputProps","inputProps","min","max","localVariables","localStorage","getItem","JSON","parse","seq","elementsEditLoc","sequence","map","itemNode","inode","numberLoc","replace","elm","arsOnly","arrNumberMax","Math","apply","current","handleClose","setTimeout","verifyButtonsUpload","imgVerify","audioVerify","videoVerify","handleSaveNode","formData","FormData","forEach","media","idx","split","quality","success","append","err","alert","message","mountData","verify","post","then","res","catch","scrollToBottom","element","scrollTop","scrollHeight","variableFormatter","fullWidth","scroll","overflow","height","scrollBehavior","Fragment","oldEleme","t","alignSelf"],"sources":["/workspaces/simao/whaticket/frontend/src/components/FlowBuilderSingleBlockModal/index.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\n\nimport * as Yup from \"yup\";\nimport { Formik, FieldArray, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Compressor from \"compressorjs\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport {\n  Checkbox,\n  FormControl,\n  InputLabel,\n  MenuItem,\n  Select,\n  Stack,\n  Typography,\n} from \"@mui/material\";\nimport {\n  AccessTime,\n  AddCircle,\n  Delete,\n  Image,\n  KeyboardArrowDown,\n  KeyboardArrowUp,\n  Message,\n  MicNone,\n  Videocam,\n} from \"@mui/icons-material\";\nimport { capitalize } from \"../../utils/capitalize\";\nimport { Box, Divider } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  },\n  textField: {\n    marginRight: theme.spacing(1),\n    flex: 1,\n  },\n\n  extraAttr: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n\n  btnWrapper: {\n    position: \"relative\",\n  },\n\n  buttonProgress: {\n    color: green[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12,\n  },\n}));\n\nconst FlowBuilderSingleBlockModal = ({\n  open,\n  onSave,\n  onUpdate,\n  data,\n  close,\n}) => {\n  const classes = useStyles();\n  const isMounted = useRef(true);\n\n  const [activeModal, setActiveModal] = useState(false);\n\n  const [rule, setRule] = useState();\n\n  const [medias, setMedias] = useState([]);\n\n  const [textDig, setTextDig] = useState();\n\n  const [elements, setElements] = useState([]);\n\n  const [elementsSeq, setElementsSeq] = useState([]);\n\n  const [elementsSeqEdit, setElementsSeqEdit] = useState([]);\n\n  const [elementsEdit, setElementsEdit] = useState([]);\n\n  const [numberMessages, setNumberMessages] = useState(0);\n\n  const [numberMessagesLast, setNumberMessagesLast] = useState(0);\n\n  const [numberInterval, setNumberInterval] = useState(0);\n\n  const [numberIntervalLast, setNumberIntervalLast] = useState(0);\n\n  const [numberAudio, setNumberAudio] = useState(0);\n\n  const [numberAudioLast, setNumberAudioLast] = useState(0);\n\n  const [numberVideo, setNumberVideo] = useState(0);\n\n  const [numberVideoLast, setNumberVideoLast] = useState(0);\n\n  const [numberImg, setNumberImg] = useState(0);\n\n  const [numberImgLast, setNumberImgLast] = useState(0);\n\n  const [loading, setLoading] = useState(false);\n\n  const [previewImg, setPreviewImg] = useState([]);\n\n  const [previewAudios, setPreviewAudios] = useState([]);\n\n  const [previewVideos, setPreviewVideos] = useState([]);\n\n  const [arrayOption, setArrayOption] = useState([]);\n\n  const [variables, setVariables] = useState([]);\n\n  const [labels, setLabels] = useState({\n    title: \"Adicionar conteúdo ao fluxo\",\n    btn: \"Adicionar\",\n  });\n\n  const handleElements = (newNameFiles) => {\n    let elementsSequence = [];\n\n    const newArrMessage = elementsSeq.filter((item) =>\n      item.includes(\"message\")\n    );\n    const newArrInterval = elementsSeq.filter((item) =>\n      item.includes(\"interval\")\n    );\n    const newArrImg = elementsSeq.filter((item) => item.includes(\"img\"));\n    const newArrAudio = elementsSeq.filter((item) => item.includes(\"audio\"));\n    const newArrVideo = elementsSeq.filter((item) => item.includes(\"video\"));\n\n    //Todas as mensagens\n    for (let i = 0; i < numberMessages; i++) {\n      const value = document\n        .querySelector(`.${newArrMessage[i]}`)\n        .querySelector(\".MuiInputBase-input\").value;\n      if (!value) {\n        toast.error(\"Campos de mensagem vazio!\");\n        setLoading(false);\n        throw \"\";\n      }\n      elementsSequence.push({\n        type: \"message\",\n        value: value,\n        number: newArrMessage[i],\n      });\n      console.log(\"text\");\n    }\n    //Todos os intervalos\n    for (let i = 0; i < numberInterval; i++) {\n      const value = document\n        .querySelector(`.${newArrInterval[i]}`)\n        .querySelector(\".MuiInputBase-input\").value;\n      if (parseInt(value) === 0 || parseInt(value) > 120) {\n        toast.error(\"Intervalo não pode ser 0 ou maior que 120!\");\n        setLoading(false);\n        throw \"\";\n      }\n      elementsSequence.push({\n        type: \"interval\",\n        value: value,\n        number: newArrInterval[i],\n      });\n      console.log(\"int\");\n    }\n\n    //Todas as imagens\n    for (let i = 0; i < numberImg; i++) {\n      const onlyImg =\n        newNameFiles !== null &&\n        newNameFiles.filter(\n          (file) =>\n            file.includes(\"png\") ||\n            file.includes(\"jpg\") ||\n            file.includes(\"jpeg\")\n        );\n      const onlyImgNameOriginal = medias.filter(\n        (file) =>\n          file.name.includes(\"png\") ||\n          file.name.includes(\"jpg\") ||\n          file.name.includes(\"jpeg\")\n      );\n      if (elementsSeqEdit.includes(newArrImg[i])) {\n        const itemSelectedEdit = elementsEdit.filter(\n          (item) => item.number === newArrImg[i]\n        )[0];\n        elementsSequence.push({\n          type: \"img\",\n          value: itemSelectedEdit.value,\n          original: itemSelectedEdit.original,\n          number: itemSelectedEdit.number,\n        });\n      } else {\n        let indexElem = 0;\n        if (elementsSeqEdit.filter((item) => item.includes(\"img\")).length > 0) {\n          indexElem =\n            elementsSeqEdit.filter((item) => item.includes(\"img\")).length - i;\n        } else {\n          indexElem = i;\n        }\n        elementsSequence.push({\n          type: \"img\",\n          value: onlyImg[indexElem],\n          original: onlyImgNameOriginal[indexElem].name,\n          number: newArrImg[i],\n        });\n      }\n    }\n    //Todos os audios\n    for (let i = 0; i < numberAudio; i++) {\n      const onlyAudio =\n        newNameFiles !== null &&\n        newNameFiles.filter(\n          (file) =>\n            file.includes(\"mp3\") ||\n            file.includes(\"ogg\") ||\n            file.includes(\"mpeg\") ||\n            file.includes(\"opus\")\n        );\n      const onlyAudioNameOriginal = medias.filter(\n        (file) =>\n          file.name.includes(\"mp3\") ||\n          file.name.includes(\"ogg\") ||\n          file.name.includes(\"mpeg\") ||\n          file.name.includes(\"opus\")\n      );\n\n      if (elementsSeqEdit.includes(newArrAudio[i])) {\n        const itemSelectedEdit = elementsEdit.filter(\n          (item) => item.number === newArrAudio[i]\n        )[0];\n        elementsSequence.push({\n          type: \"audio\",\n          value: itemSelectedEdit.value,\n          original: itemSelectedEdit.original,\n          number: itemSelectedEdit.number,\n          record: document\n            .querySelector(`.check${newArrAudio[i]}`)\n            .querySelector(\".PrivateSwitchBase-input\").checked,\n        });\n      } else {\n        let indexElem = 0;\n        if (\n          elementsSeqEdit.filter((item) => item.includes(\"audio\")).length > 0\n        ) {\n          indexElem =\n            elementsSeqEdit.filter((item) => item.includes(\"audio\")).length - i;\n        } else {\n          indexElem = i;\n        }\n        elementsSequence.push({\n          type: \"audio\",\n          value: onlyAudio[indexElem],\n          original: onlyAudioNameOriginal[indexElem].name,\n          number: newArrAudio[i],\n          record: document\n            .querySelector(`.check${newArrAudio[i]}`)\n            .querySelector(\".PrivateSwitchBase-input\").checked,\n        });\n      }\n    }\n    //Todos os videos\n    for (let i = 0; i < numberVideo; i++) {\n      const onlyVideo =\n        newNameFiles !== null &&\n        newNameFiles.filter(\n          (file) => file.includes(\"mp4\") || file.includes(\"avi\")\n        );\n      const onlyVideoNameOriginal = medias.filter(\n        (file) => file.name.includes(\"mp4\") || file.name.includes(\"avi\")\n      );\n      if (elementsSeqEdit.includes(newArrVideo[i])) {\n        const itemSelectedEdit = elementsEdit.filter(\n          (item) => item.number === newArrVideo[i]\n        )[0];\n        elementsSequence.push({\n          type: \"video\",\n          value: itemSelectedEdit.value,\n          original: itemSelectedEdit.original,\n          number: itemSelectedEdit.number,\n        });\n      } else {\n        let indexElem = 0;\n        if (\n          elementsSeqEdit.filter((item) => item.includes(\"video\")).length > 0\n        ) {\n          indexElem =\n            elementsSeqEdit.filter((item) => item.includes(\"video\")).length - i;\n        } else {\n          indexElem = i;\n        }\n        elementsSequence.push({\n          type: \"video\",\n          value: onlyVideo[indexElem],\n          original: onlyVideoNameOriginal[indexElem].name,\n          number: newArrVideo[i],\n        });\n      }\n    }\n\n    console.log(elementsSequence);\n\n    return elementsSequence;\n  };\n\n  const deleteElementsTypeOne = (id, type) => {\n    if (type === \"message\") {\n      setNumberMessages((old) => old - 1);\n      setElementsSeq((old) => old.filter((item) => item !== `message${id}`));\n      setElementsSeqEdit((old) =>\n        old.filter((item) => item !== `message${id}`)\n      );\n      document.querySelector(`.stackMessage${id}`).remove();\n    }\n    if (type === \"interval\") {\n      setNumberInterval((old) => old - 1);\n      setElementsSeq((old) => old.filter((item) => item !== `interval${id}`));\n      setElementsSeqEdit((old) =>\n        old.filter((item) => item !== `interval${id}`)\n      );\n      document.querySelector(`.stackInterval${id}`).remove();\n    }\n    if (type === \"img\") {\n      setNumberImg((old) => old - 1);\n      setPreviewImg((old) => {\n        setMedias((oldMedia) => {\n          try {\n            return oldMedia.filter(\n              (mediaItem) =>\n                mediaItem.name !==\n                old.filter((item) => item.number === id)[0].name\n            );\n          } catch (e) {\n            return oldMedia;\n          }\n        });\n        return old.filter((item) => item.number !== id);\n      });\n      setElementsSeq((old) => old.filter((item) => item !== `img${id}`));\n      setElementsSeqEdit((old) => old.filter((item) => item !== `img${id}`));\n      document.querySelector(`.stackImg${id}`).remove();\n    }\n    if (type === \"audio\") {\n      setNumberAudio((old) => old - 1);\n      setPreviewAudios((old) => {\n        setMedias((oldMedia) => {\n          try {\n            return oldMedia.filter(\n              (mediaItem) =>\n                mediaItem.name !==\n                old.filter((item) => item.number === id)[0].name\n            );\n          } catch (e) {\n            return oldMedia;\n          }\n        });\n        return old.filter((item) => item.number !== id);\n      });\n      setElementsSeq((old) => old.filter((item) => item !== `audio${id}`));\n      setElementsSeqEdit((old) => old.filter((item) => item !== `audio${id}`));\n      document.querySelector(`.stackAudio${id}`).remove();\n    }\n    if (type === \"video\") {\n      setNumberVideo((old) => old - 1);\n      setPreviewVideos((old) => {\n        setMedias((oldMedia) => {\n          try {\n            return oldMedia.filter(\n              (mediaItem) =>\n                mediaItem.name !==\n                old.filter((item) => item.number === id)[0].name\n            );\n          } catch (e) {\n            return oldMedia;\n          }\n        });\n        return old.filter((item) => item.number !== id);\n      });\n      setElementsSeq((old) => old.filter((item) => item !== `video${id}`));\n      setElementsSeqEdit((old) => old.filter((item) => item !== `video${id}`));\n      document.querySelector(`.stackVideo${id}`).remove();\n    }\n  };\n\n  const moveElementDown = (id) => {\n    setElementsSeq((old) => {\n      const array = old;\n      const index = array.indexOf(id);\n      moveItemParaFrente(index);\n      console.log(\"id\", id);\n      if (index !== -1 && index < array.length - 1) {\n        // Verifica se o elemento foi encontrado no array e não está na última posição\n        const novoArray = [...array]; // Cria uma cópia do array original\n        const elementoMovido = novoArray.splice(index, 1)[0];\n        novoArray.splice(index + 1, 0, elementoMovido);\n        return novoArray;\n      }\n      return array;\n    });\n  };\n\n  const moveElementUp = (id) => {\n    setElementsSeq((old) => {\n      const array = old;\n      const index = array.indexOf(id);\n      moveItemParaTras(index);\n\n      if (index !== -1 && index > 0) {\n        // Verifica se o elemento foi encontrado no array e não está na primeira posição\n        const novoArray = [...array]; // Cria uma cópia do array original\n        const elementoMovido = novoArray.splice(index, 1)[0];\n        novoArray.splice(index - 1, 0, elementoMovido);\n        return novoArray;\n      }\n      return array;\n    });\n  };\n\n  function moveItemParaFrente(posicao) {\n    setElements((old) => {\n      const array = old;\n\n      if (posicao >= 0 && posicao < array.length - 1) {\n        const novoArray = [...array]; // Cria uma cópia do array original\n        const elementoMovido = novoArray.splice(posicao, 1)[0];\n        novoArray.splice(posicao + 1, 0, elementoMovido);\n        return novoArray;\n      }\n\n      return array; // Retorna o array original se a movimentação não for possível\n    });\n  }\n\n  function moveItemParaTras(posicao) {\n    setElements((old) => {\n      const array = old;\n      if (posicao > 0 && posicao < array.length) {\n        const novoArray = [...array]; // Cria uma cópia do array original\n        const elementoMovido = novoArray.splice(posicao, 1)[0];\n        novoArray.splice(posicao - 1, 0, elementoMovido);\n        return novoArray;\n      }\n\n      return array; // Retorna o array original se a movimentação não for possível\n    });\n  }\n\n  const handleChangeMediasImg = (e, number) => {\n    if (!e.target.files) {\n      return;\n    }\n\n    if (e.target.files[0].size > 2000000) {\n      toast.error(\"Arquivo é muito grande! 2MB máximo\");\n      return;\n    }\n    const imgBlob = URL.createObjectURL(e.target.files[0]);\n    setPreviewImg((old) => [\n      ...old,\n      {\n        number: number,\n        url: imgBlob,\n        name: e.target.files[0].name,\n      },\n    ]);\n    const selectedMedias = Array.from(e.target.files);\n    setMedias((old) => [...old, selectedMedias[0]]);\n\n    document.querySelector(`.img${number}`).src = imgBlob;\n    document.querySelector(`.btnImg${number}`).remove();\n  };\n\n  const handleChangeAudios = (e, number) => {\n    if (!e.target.files) {\n      return;\n    }\n\n    if (e.target.files[0].size > 5000000) {\n      toast.error(\"Arquivo é muito grande! 5MB máximo\");\n      return;\n    }\n\n    const audioBlob = URL.createObjectURL(e.target.files[0]);\n    setPreviewAudios((old) => [\n      ...old,\n      {\n        number: number,\n        url: audioBlob,\n        name: e.target.files[0].name,\n      },\n    ]);\n\n    const selectedMedias = Array.from(e.target.files);\n    setMedias((old) => [...old, selectedMedias[0]]);\n\n    document.querySelector(\n      `.audio${number}`\n    ).innerHTML = `<audio controls=\"controls\">\n    <source src=\"${audioBlob}\" type=\"audio/mp3\" />\n    seu navegador não suporta HTML5\n  </audio>`;\n    document.querySelector(`.btnAudio${number}`).remove();\n  };\n\n  const handleChangeVideos = (e, number) => {\n    if (!e.target.files) {\n      return;\n    }\n\n    if (e.target.files[0].size > 20000000) {\n      toast.error(\"Arquivo é muito grande! 20MB máximo\");\n      return;\n    }\n    const videoBlob = URL.createObjectURL(e.target.files[0]);\n    setPreviewVideos((old) => [\n      ...old,\n      {\n        number: number,\n        url: videoBlob,\n        name: e.target.files[0].name,\n      },\n    ]);\n\n    var divConteudo = document.createElement(\"div\");\n\n    const selectedMedias = Array.from(e.target.files);\n    setMedias((old) => [...old, selectedMedias[0]]);\n\n    divConteudo.innerHTML = `<video controls=\"controls\" style=\"width: 200px;\">\n    <source src=\"${videoBlob}\" type=\"video/mp4\" />\n    seu navegador não suporta HTML5\n  </video>`;\n\n    document.querySelector(`.video${number}`).appendChild(divConteudo);\n    document.querySelector(`.btnVideo${number}`).remove();\n  };\n\n  const imgLayout = (number, valueDefault = \"\") => {\n    return (\n      <Stack\n        sx={{\n          border: \"1px solid #0000FF\",\n          borderRadius: \"7px\",\n          padding: \"6px\",\n          position: \"relative\",\n        }}\n        className={`stackImg${number}`}\n        key={`stackImg${number}`}\n      >\n        <Stack sx={{ position: \"absolute\", right: 6 }}>\n          <Delete onClick={() => deleteElementsTypeOne(number, \"img\")} />\n        </Stack>\n        <Typography textAlign={\"center\"}>Imagem</Typography>\n        <Stack direction={\"row\"} justifyContent={\"center\"}>\n          <img\n            src={\n              valueDefault.length > 0\n                ? process.env.REACT_APP_BACKEND_URL + \"/public/\" + valueDefault\n                : \"\"\n            }\n            className={`img${number}`}\n            style={{ width: \"200px\" }}\n          />\n        </Stack>\n        {valueDefault.length === 0 && (\n          <Button\n            variant=\"contained\"\n            component=\"label\"\n            className={`btnImg${number}`}\n          >\n            Enviar imagem\n            <input\n              type=\"file\"\n              accept=\"image/png, image/jpg, image/jpeg\"\n              hidden\n              onChange={(e) => handleChangeMediasImg(e, number)}\n            />\n          </Button>\n        )}\n      </Stack>\n    );\n  };\n\n  const audioLayout = (number, valueDefault = \"\", valueRecordDefault = \"\") => {\n    return (\n      <Stack\n        sx={{\n          border: \"1px solid #0000FF\",\n          borderRadius: \"7px\",\n          padding: \"6px\",\n          position: \"relative\",\n        }}\n        className={`stackAudio${number}`}\n        key={`stackAudio${number}`}\n      >\n        <Stack\n          sx={{ position: \"absolute\", right: 6 }}\n          direction={\"row\"}\n          gap={1}\n        >\n          {/* <KeyboardArrowUp\n            onClick={() => moveElementUp(`audio${number}`)}\n            sx={{ cursor: \"pointer\" }}\n          />\n          <KeyboardArrowDown\n            onClick={() => moveElementDown(`audio${number}`)}\n            sx={{ cursor: \"pointer\" }}\n          /> */}\n          <Delete\n            sx={{ cursor: \"pointer\" }}\n            onClick={() => deleteElementsTypeOne(number, \"audio\")}\n          />\n        </Stack>\n        <Typography textAlign={\"center\"}>Audio</Typography>\n        <div\n          className={`audio${number}`}\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"center\",\n          }}\n        >\n          {valueDefault.length > 0 && (\n            <audio controls=\"controls\">\n              <source\n                src={\n                  process.env.REACT_APP_BACKEND_URL + \"/public/\" + valueDefault\n                }\n                type=\"audio/mp3\"\n              />\n              seu navegador não suporta HTML5\n            </audio>\n          )}\n        </div>\n        {valueDefault.length === 0 && (\n          <Button\n            variant=\"contained\"\n            component=\"label\"\n            className={`btnAudio${number}`}\n          >\n            Enviar audio\n            <input\n              type=\"file\"\n              accept=\"audio/ogg, audio/mp3, audio/opus\"\n              hidden\n              onChange={(e) => handleChangeAudios(e, number)}\n            />\n          </Button>\n        )}\n        <Stack direction={\"row\"} justifyContent={\"center\"}>\n          <Checkbox\n            className={`checkaudio${number}`}\n            defaultChecked={valueRecordDefault === \"ok\" ? false : true}\n          />\n          <Stack justifyContent={\"center\"}>\n            <Typography>Enviar como audio gravado na hora</Typography>\n          </Stack>\n        </Stack>\n      </Stack>\n    );\n  };\n\n  const videoLayout = (number, valueDefault = \"\") => {\n    return (\n      <Stack\n        sx={{\n          border: \"1px solid #0000FF\",\n          borderRadius: \"7px\",\n          padding: \"6px\",\n          position: \"relative\",\n        }}\n        className={`stackVideo${number}`}\n        key={`stackVideo${number}`}\n      >\n        <Stack sx={{ position: \"absolute\", right: 6 }}>\n          <Delete onClick={() => deleteElementsTypeOne(number, \"video\")} />\n        </Stack>\n        <Typography textAlign={\"center\"}>Video</Typography>\n        <div\n          className={`video${number}`}\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"center\",\n          }}\n        >\n          {valueDefault.length > 0 && (\n            <video controls=\"controls\" style={{ width: \"200px\" }}>\n              <source\n                src={\n                  process.env.REACT_APP_BACKEND_URL + \"/public/\" + valueDefault\n                }\n                type=\"video/mp4\"\n              />\n              seu navegador não suporta HTML5\n            </video>\n          )}\n        </div>\n        {valueDefault.length === 0 && (\n          <Button\n            variant=\"contained\"\n            component=\"label\"\n            className={`btnVideo${number}`}\n          >\n            Enviar video\n            <input\n              type=\"file\"\n              accept=\"video/mp4\"\n              hidden\n              onChange={(e) => handleChangeVideos(e, number)}\n            />\n          </Button>\n        )}\n      </Stack>\n    );\n  };\n\n  const messageLayout = (number, valueDefault = \"\") => {\n    return (\n      <Stack\n        sx={{\n          border: \"1px solid #0000FF\",\n          borderRadius: \"7px\",\n          padding: \"6px\",\n          position: \"relative\",\n        }}\n        className={`stackMessage${number}`}\n        key={`stackMessage${number}`}\n      >\n        <Stack sx={{ position: \"absolute\", right: 6 }}>\n          <Delete onClick={() => deleteElementsTypeOne(number, \"message\")} />\n        </Stack>\n        <Typography textAlign={\"center\"}>Texto</Typography>\n        <TextField\n          label={\"Mensagem\"}\n          defaultValue={valueDefault}\n          multiline\n          rows={7}\n          className={`message${number}`}\n          name=\"text\"\n          variant=\"outlined\"\n          margin=\"dense\"\n          style={{ width: \"100%\" }}\n        />\n      </Stack>\n    );\n  };\n\n  const intervalLayout = (number, valueDefault = 0) => {\n    return (\n      <Stack\n        sx={{\n          border: \"1px solid #0000FF\",\n          borderRadius: \"7px\",\n          padding: \"6px\",\n          position: \"relative\",\n        }}\n        className={`stackInterval${number}`}\n        key={`stackInterval${number}`}\n      >\n        <Stack sx={{ position: \"absolute\", right: 6 }}>\n          <Delete onClick={() => deleteElementsTypeOne(number, \"interval\")} />\n        </Stack>\n        <Typography textAlign={\"center\"}>Intervalo</Typography>\n        <TextField\n          label={\"Tempo em segundos\"}\n          className={`interval${number}`}\n          defaultValue={valueDefault}\n          type=\"number\"\n          InputProps={{ inputProps: { min: 0, max: 120 } }}\n          variant=\"outlined\"\n          margin=\"dense\"\n          style={{ width: \"100%\" }}\n        />\n      </Stack>\n    );\n  };\n\n  useEffect(() => {\n    const localVariables = localStorage.getItem(\"variables\");\n    if (localVariables) {\n      setVariables(JSON.parse(localVariables));\n    }\n\n    if (open === \"edit\") {\n      setLabels({\n        title: \"Editar conteúdo\",\n        btn: \"Salvar\",\n      });\n\n      setElementsSeq(data.data.seq);\n\n      setElementsSeqEdit(data.data.seq);\n      setElementsEdit(data.data.elements);\n      if (data) {\n        const elementsEditLoc = data.data.elements;\n        const sequence = data.data.seq;\n\n        sequence.map((item) => {\n          const itemNode = elementsEditLoc.filter(\n            (inode) => inode.number === item\n          )[0];\n          if (itemNode.type === \"message\") {\n            const numberLoc = parseInt(item.replace(\"message\", \"\"));\n            setElements((elm) => [\n              ...elm,\n              messageLayout(numberLoc, itemNode.value),\n            ]);\n            setNumberMessages((old) => {\n              const arsOnly = sequence.filter((item) =>\n                item.includes(\"message\")\n              );\n              const arrNumberMax = arsOnly.map((item) =>\n                parseInt(item.replace(\"message\", \"\"))\n              );\n              setNumberMessagesLast(Math.max.apply(null, arrNumberMax) + 1);\n              return old + 1;\n            });\n          }\n          if (itemNode.type === \"interval\") {\n            const numberLoc = parseInt(item.replace(\"interval\", \"\"));\n            setElements((elm) => [\n              ...elm,\n              intervalLayout(numberLoc, itemNode.value),\n            ]);\n            setNumberInterval((old) => {\n              const arsOnly = sequence.filter((item) =>\n                item.includes(\"interval\")\n              );\n              const arrNumberMax = arsOnly.map((item) =>\n                parseInt(item.replace(\"interval\", \"\"))\n              );\n              setNumberIntervalLast(Math.max.apply(null, arrNumberMax) + 1);\n              return old + 1;\n            });\n          }\n          if (itemNode.type === \"audio\") {\n            const numberLoc = parseInt(item.replace(\"audio\", \"\"));\n            setElements((elm) => [\n              ...elm,\n              audioLayout(\n                numberLoc,\n                itemNode.value,\n                itemNode.record ? \"\" : \"ok\"\n              ),\n            ]);\n            setNumberAudio((old) => {\n              const arsOnly = sequence.filter((item) => item.includes(\"audio\"));\n              const arrNumberMax = arsOnly.map((item) =>\n                parseInt(item.replace(\"audio\", \"\"))\n              );\n              setNumberAudioLast(Math.max.apply(null, arrNumberMax) + 1);\n              return old + 1;\n            });\n          }\n          if (itemNode.type === \"img\") {\n            const numberLoc = parseInt(item.replace(\"img\", \"\"));\n            setElements((elm) => [\n              ...elm,\n              imgLayout(numberLoc, itemNode.value),\n            ]);\n            setNumberImg((old) => {\n              const arsOnly = sequence.filter((item) => item.includes(\"img\"));\n              const arrNumberMax = arsOnly.map((item) =>\n                parseInt(item.replace(\"img\", \"\"))\n              );\n              setNumberImgLast(Math.max.apply(null, arrNumberMax) + 1);\n              return old + 1;\n            });\n          }\n          if (itemNode.type === \"video\") {\n            const numberLoc = parseInt(item.replace(\"video\", \"\"));\n            setElements((elm) => [\n              ...elm,\n              videoLayout(numberLoc, itemNode.value),\n            ]);\n            setNumberVideo((old) => {\n              const arsOnly = sequence.filter((item) => item.includes(\"video\"));\n              const arrNumberMax = arsOnly.map((item) =>\n                parseInt(item.replace(\"video\", \"\"))\n              );\n              setNumberVideoLast(Math.max.apply(null, arrNumberMax) + 1);\n              return old + 1;\n            });\n          }\n        });\n      }\n      setActiveModal(true);\n    }\n    if (open === \"create\") {\n      setLabels({\n        title: \"Adicionar menu ao fluxo\",\n        btn: \"Adicionar\",\n      });\n      setTextDig();\n      setArrayOption([]);\n      setActiveModal(true);\n    }\n  }, [open]);\n\n  useEffect(() => {\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  const handleClose = async () => {\n    close(null);\n    setActiveModal(false);\n    setTimeout(() => {\n      setMedias([]);\n      setPreviewImg([]);\n      setPreviewAudios([]);\n      setPreviewVideos([]);\n      setArrayOption([]);\n      setElements([]);\n      setElementsSeq([]);\n      setElementsEdit([]);\n      setElementsSeqEdit([]);\n      setNumberMessages(0);\n      setNumberMessagesLast(0);\n      setNumberInterval(0);\n      setNumberIntervalLast(0);\n      setNumberAudio(0);\n      setNumberAudioLast(0);\n      setNumberVideo(0);\n      setNumberVideoLast(0);\n      setNumberImg(0);\n      setNumberImgLast(0);\n    }, 500);\n  };\n\n  const verifyButtonsUpload = () => {\n    const newArrImg = elementsSeq.filter((item) => item.includes(\"img\"));\n    const newArrAudio = elementsSeq.filter((item) => item.includes(\"audio\"));\n    const newArrVideo = elementsSeq.filter((item) => item.includes(\"video\"));\n\n    for (let i = 0; i < numberImg; i++) {\n      const imgVerify = document.querySelector(\n        `.btn${capitalize(newArrImg[i])}`\n      );\n      if (imgVerify) {\n        return true;\n      }\n    }\n    for (let i = 0; i < numberAudio; i++) {\n      const audioVerify = document.querySelector(\n        `.btn${capitalize(newArrAudio[i])}`\n      );\n      if (audioVerify) {\n        return true;\n      }\n    }\n    for (let i = 0; i < numberVideo; i++) {\n      const videoVerify = document.querySelector(\n        `.btn${capitalize(newArrVideo[i])}`\n      );\n      if (videoVerify) {\n        return true;\n      }\n    }\n  };\n\n  const handleSaveNode = async () => {\n    if (open === \"edit\") {\n      setLoading(true);\n      const formData = new FormData();\n\n      medias.forEach(async (media, idx) => {\n        const file = media;\n\n        if (!file) {\n          return;\n        }\n\n        if (media?.type.split(\"/\")[0] == \"image\") {\n          new Compressor(file, {\n            quality: 0.7,\n\n            async success(media) {\n              formData.append(\"medias\", media);\n              formData.append(\"body\", media.name);\n            },\n            error(err) {\n              alert(\"erro\");\n              console.log(err.message);\n            },\n          });\n        } else {\n          formData.append(\"medias\", media);\n          formData.append(\"body\", media.name);\n        }\n      });\n\n      setTimeout(async () => {\n        if (\n          (numberAudio === 0 && numberVideo === 0 && numberImg === 0) ||\n          medias.length === 0\n        ) {\n          try {\n            const mountData = {\n              seq: elementsSeq,\n              elements: handleElements(null),\n            };\n            console.log(\"QUI\", mountData);\n            onUpdate({\n              ...data,\n              data: mountData,\n            });\n            toast.success(\"Conteúdo adicionada com sucesso!\");\n            handleClose();\n            setLoading(false);\n\n            return;\n          } catch (e) {\n            console.log(e);\n            setLoading(false);\n          }\n          return;\n        }\n        const verify = verifyButtonsUpload();\n        if (verify) {\n          setLoading(false);\n          return toast.error(\"Delete os cards vazios(Imagem, Audio e Video)\");\n        }\n        await api\n          .post(\"/flowbuilder/content\", formData)\n          .then(async (res) => {\n            const mountData = {\n              seq: elementsSeq,\n              elements: handleElements(res.data),\n            };\n            onUpdate({\n              ...data,\n              data: mountData,\n            });\n            toast.success(\"Conteúdo adicionada com sucesso!\");\n            await handleClose();\n            setLoading(false);\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      }, 1500);\n    } else if (open === \"create\") {\n      setLoading(true);\n      const formData = new FormData();\n\n      medias.forEach(async (media, idx) => {\n        const file = media;\n\n        if (!file) {\n          return;\n        }\n\n        if (media?.type.split(\"/\")[0] == \"image\") {\n          new Compressor(file, {\n            quality: 0.7,\n\n            async success(media) {\n              formData.append(\"medias\", media);\n              formData.append(\"body\", media.name);\n            },\n            error(err) {\n              alert(\"erro\");\n              console.log(err.message);\n            },\n          });\n        } else {\n          formData.append(\"medias\", media);\n          formData.append(\"body\", media.name);\n        }\n      });\n\n      setTimeout(async () => {\n        if (numberAudio === 0 && numberVideo === 0 && numberImg === 0) {\n          try {\n            const mountData = {\n              seq: elementsSeq,\n              elements: handleElements(null),\n            };\n            onSave({\n              ...mountData,\n            });\n            toast.success(\"Conteúdo adicionada com sucesso!\");\n            handleClose();\n            setLoading(false);\n\n            return;\n          } catch (e) {\n            setLoading(false);\n          }\n        }\n        const verify = verifyButtonsUpload();\n        if (verify) {\n          setLoading(false);\n          return toast.error(\"Delete os cards vazios(Imagem, Audio e Video)\");\n        }\n        await api\n          .post(\"/flowbuilder/content\", formData)\n          .then((res) => {\n            const mountData = {\n              seq: elementsSeq,\n              elements: handleElements(res.data),\n            };\n            onSave({\n              ...mountData,\n            });\n            toast.success(\"Conteúdo adicionada com sucesso!\");\n            handleClose();\n            setLoading(false);\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      }, 1500);\n    }\n  };\n\n  const scrollToBottom = (className) => {\n    const element = document.querySelector(className);\n    element.scrollTop = element.scrollHeight;\n  };\n\n  const variableFormatter = (item) => {\n    return \"{{\" + item + \"}}\";\n  };\n  return (\n    <div>\n      <Dialog open={activeModal} fullWidth=\"md\" scroll=\"paper\">\n        {!loading && (\n          <DialogTitle id=\"form-dialog-title\">\n            Adicionar conteúdo ao fluxo\n          </DialogTitle>\n        )}\n        <Stack>\n          <Stack\n            className=\"body-card\"\n            style={{\n              gap: \"8px\",\n              padding: \"16px\",\n              overflow: \"auto\",\n              height: \"70vh\",\n              scrollBehavior: \"smooth\",\n              display: loading && \"none\",\n            }}\n          >\n            {elements.map((item) => (\n              <>{item}</>\n            ))}\n            <Stack direction={\"row\"} gap={1}>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  setElements((old) => [\n                    ...old,\n                    messageLayout(numberMessagesLast),\n                  ]);\n                  setNumberMessages((old) => {\n                    setElementsSeq((oldEleme) => [\n                      ...oldEleme,\n                      `message${numberMessagesLast}`,\n                    ]);\n                    return old + 1;\n                  });\n                  setNumberMessagesLast((old) => old + 1);\n                  setTimeout(() => {\n                    scrollToBottom(\".body-card\");\n                  }, 100);\n                }}\n              >\n                <Message\n                  sx={{\n                    width: \"16px\",\n                    height: \"16px\",\n                    marginRight: \"4px\",\n                  }}\n                />\n                Texto\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  setElements((old) => [\n                    ...old,\n                    intervalLayout(numberIntervalLast),\n                  ]);\n                  setNumberInterval((old) => {\n                    setElementsSeq((oldEleme) => [\n                      ...oldEleme,\n                      `interval${numberIntervalLast}`,\n                    ]);\n                    return old + 1;\n                  });\n                  setNumberIntervalLast((old) => old + 1);\n                  setTimeout(() => {\n                    scrollToBottom(\".body-card\");\n                  }, 100);\n                }}\n              >\n                <AccessTime\n                  sx={{\n                    width: \"16px\",\n                    height: \"16px\",\n                    marginRight: \"4px\",\n                  }}\n                />\n                Intervalo\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  setElements((old) => [...old, imgLayout(numberImgLast)]);\n                  setNumberImg((old) => {\n                    setElementsSeq((oldEleme) => [\n                      ...oldEleme,\n                      `img${numberImgLast}`,\n                    ]);\n                    return old + 1;\n                  });\n                  setNumberImgLast((old) => old + 1);\n                  setTimeout(() => {\n                    scrollToBottom(\".body-card\");\n                  }, 100);\n                }}\n              >\n                <Image\n                  sx={{\n                    width: \"16px\",\n                    height: \"16px\",\n                    marginRight: \"4px\",\n                  }}\n                />\n                Imagem\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  setElements((old) => [...old, audioLayout(numberAudioLast)]);\n                  setNumberAudio((old) => {\n                    setElementsSeq((oldEleme) => [\n                      ...oldEleme,\n                      `audio${numberAudioLast}`,\n                    ]);\n                    return old + 1;\n                  });\n                  setNumberAudioLast((old) => old + 1);\n                  setTimeout(() => {\n                    scrollToBottom(\".body-card\");\n                  }, 100);\n                }}\n              >\n                <MicNone\n                  sx={{\n                    width: \"16px\",\n                    height: \"16px\",\n                    marginRight: \"4px\",\n                  }}\n                />\n                Audio\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  setElements((old) => [...old, videoLayout(numberVideoLast)]);\n                  setNumberVideo((old) => {\n                    setElementsSeq((oldEleme) => [\n                      ...oldEleme,\n                      `video${numberVideoLast}`,\n                    ]);\n                    return old + 1;\n                  });\n                  setNumberVideoLast((old) => old + 1);\n                  setTimeout(() => {\n                    scrollToBottom(\".body-card\");\n                  }, 100);\n                }}\n              >\n                <Videocam\n                  sx={{\n                    width: \"16px\",\n                    height: \"16px\",\n                    marginRight: \"4px\",\n                  }}\n                />\n                Video\n              </Button>\n            </Stack>\n            <Divider />\n            <Box style={{ width: \"100%\", textAlign: \"center\" }}>\n              <Typography>Variáveis</Typography>\n              {variables && (\n                <>\n                  {variables.map((item) => (\n                    <>\n                      <Typography>{variableFormatter(item)}</Typography>\n                    </>\n                  ))}\n                </>\n              )}\n            </Box>\n          </Stack>\n\n          <DialogActions>\n            <Button\n              onClick={handleClose}\n              color=\"secondary\"\n              variant=\"outlined\"\n              style={{ display: loading && \"none\" }}\n            >\n              {i18n.t(\"contactModal.buttons.cancel\")}\n            </Button>\n            <Button\n              type=\"submit\"\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={() => handleSaveNode()}\n              style={{ display: loading && \"none\" }}\n            >\n              {`${labels.btn}`}\n            </Button>\n          </DialogActions>\n        </Stack>\n        {loading && (\n          <Stack\n            style={{\n              gap: \"8px\",\n              padding: \"16px\",\n              height: \"70vh\",\n              alignSelf: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <Stack>\n              <Typography>\n                Subindo os arquivos e criando o conteúdo...\n              </Typography>\n              <Stack style={{ alignSelf: \"center\", marginTop: \"12px\" }}>\n                <CircularProgress />\n              </Stack>\n            </Stack>\n          </Stack>\n        )}\n      </Dialog>\n    </div>\n  );\n};\n\nexport default FlowBuilderSingleBlockModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}