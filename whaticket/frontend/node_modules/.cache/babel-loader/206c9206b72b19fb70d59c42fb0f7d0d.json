{"ast":null,"code":"var _jsxFileName = \"/workspaces/simao/whaticket/frontend/src/components/FlowBuilderRandomizerModal/index.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport * as Yup from \"yup\";\nimport { Formik, FieldArray, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { Slider, Stack } from \"@mui/material\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  textField: {\n    marginRight: theme.spacing(1),\n    flex: 1\n  },\n  extraAttr: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  btnWrapper: {\n    position: \"relative\"\n  },\n  buttonProgress: {\n    color: green[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12\n  }\n}));\nconst FlowBuilderRandomizerModal = ({\n  open,\n  onSave,\n  data,\n  onUpdate,\n  close\n}) => {\n  const classes = useStyles();\n  const isMounted = useRef(true);\n  const [percent, setPercent] = useState(0);\n  const [activeModal, setActiveModal] = useState(false);\n  useEffect(() => {\n    if (open === \"edit\") {\n      setPercent(data.data.percent);\n      setActiveModal(true);\n    } else if (open === \"create\") {\n      setPercent(0);\n      setActiveModal(true);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [open]);\n  const handleClose = () => {\n    close(null);\n    setActiveModal(false);\n  };\n  const handleValue = (event, newValue) => {\n    setPercent(newValue);\n  };\n  const handleSaveContact = async values => {\n    if (!percent || parseInt(percent) <= 0) {\n      return toast.error(\"Adicione o valor de intervalo\");\n    }\n    if (parseInt(percent) > 120) {\n      return toast.error(\"Máximo de tempo atingido 120 segundos\");\n    }\n    if (open === \"edit\") {\n      onUpdate({\n        ...data,\n        data: {\n          percent: percent\n        }\n      });\n    } else if (open === \"create\") {\n      onSave({\n        percent: percent\n      });\n    }\n    handleClose();\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Dialog, {\n    open: activeModal,\n    onClose: handleClose,\n    fullWidth: \"md\",\n    scroll: \"paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, open === \"create\" ? `Adicionar um randomizador ao fluxo` : `Editar randomizador`), /*#__PURE__*/React.createElement(Stack, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DialogContent, {\n    dividers: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    direction: 'row',\n    minHeight: 120,\n    alignItems: 'center',\n    gap: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, percent, \"%\"), /*#__PURE__*/React.createElement(Slider, {\n    \"aria-label\": \"Temperature\",\n    defaultValue: percent,\n    valueLabelDisplay: \"auto\",\n    onChange: handleValue,\n    step: 10,\n    marks: true,\n    min: 0,\n    max: 100,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, 100 - percent, \"%\"))), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleClose,\n    color: \"secondary\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, i18n.t(\"contactModal.buttons.cancel\")), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"primary\",\n    variant: \"contained\",\n    className: classes.btnWrapper,\n    onClick: () => handleSaveContact(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, open === \"create\" ? `Adicionar` : \"Editar\")))));\n};\nexport default FlowBuilderRandomizerModal;","map":{"version":3,"names":["React","useState","useEffect","useRef","Yup","Formik","FieldArray","Form","Field","toast","makeStyles","green","Button","TextField","Dialog","DialogActions","DialogContent","DialogTitle","Typography","IconButton","DeleteOutlineIcon","CircularProgress","i18n","api","toastError","Slider","Stack","useStyles","theme","root","display","flexWrap","textField","marginRight","spacing","flex","extraAttr","justifyContent","alignItems","btnWrapper","position","buttonProgress","color","top","left","marginTop","marginLeft","FlowBuilderRandomizerModal","open","onSave","data","onUpdate","close","classes","isMounted","percent","setPercent","activeModal","setActiveModal","current","handleClose","handleValue","event","newValue","handleSaveContact","values","parseInt","error","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClose","fullWidth","scroll","id","dividers","direction","minHeight","gap","defaultValue","valueLabelDisplay","onChange","step","marks","min","max","onClick","variant","t","type"],"sources":["/workspaces/simao/whaticket/frontend/src/components/FlowBuilderRandomizerModal/index.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\n\nimport * as Yup from \"yup\";\nimport { Formik, FieldArray, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { Slider, Stack } from \"@mui/material\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  textField: {\n    marginRight: theme.spacing(1),\n    flex: 1\n  },\n\n  extraAttr: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n\n  btnWrapper: {\n    position: \"relative\"\n  },\n\n  buttonProgress: {\n    color: green[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12\n  }\n}));\n\nconst FlowBuilderRandomizerModal = ({\n  open,\n  onSave,\n  data,\n  onUpdate,\n  close\n}) => {\n  const classes = useStyles();\n  const isMounted = useRef(true);\n\n  const [percent, setPercent] = useState(0);\n  const [activeModal, setActiveModal] = useState(false);\n  \n\n  useEffect(() => {\n    if (open === \"edit\") {\n      setPercent(data.data.percent);\n      setActiveModal(true);\n    } else if (open === \"create\") {\n      setPercent(0);\n      setActiveModal(true);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [open]);\n\n  const handleClose = () => {\n    close(null);\n    setActiveModal(false);\n  };\n\n  const handleValue = (event, newValue) => {\n    setPercent(newValue)\n  }\n\n  const handleSaveContact = async values => {\n    if (!percent || parseInt(percent) <= 0) {\n      return toast.error(\"Adicione o valor de intervalo\");\n    }\n    if (parseInt(percent) > 120) {\n      return toast.error(\"Máximo de tempo atingido 120 segundos\");\n    }\n    if (open === \"edit\") {\n      onUpdate({\n        ...data,\n        data: { percent: percent }\n      });\n    } else if (open === \"create\") {\n      onSave({\n        percent: percent\n      });\n    }\n    handleClose();\n  };\n\n  return (\n    <div className={classes.root}>\n      <Dialog\n        open={activeModal}\n        onClose={handleClose}\n        fullWidth=\"md\"\n        scroll=\"paper\"\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          {open === \"create\"\n            ? `Adicionar um randomizador ao fluxo`\n            : `Editar randomizador`}\n        </DialogTitle>\n        <Stack>\n          <DialogContent dividers>\n            <Stack direction={'row'} minHeight={120} alignItems={'center'} gap={4}>\n              <Typography>{percent}%</Typography>\n              <Slider\n                aria-label=\"Temperature\"\n                defaultValue={percent}\n                valueLabelDisplay=\"auto\"\n                onChange={handleValue}\n                step={10}\n                marks\n                min={0}\n                max={100}\n              />\n              <Typography>{100 - percent}%</Typography>\n            </Stack>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"secondary\" variant=\"outlined\">\n              {i18n.t(\"contactModal.buttons.cancel\")}\n            </Button>\n            <Button\n              type=\"submit\"\n              color=\"primary\"\n              variant=\"contained\"\n              className={classes.btnWrapper}\n              onClick={() => handleSaveContact()}\n            >\n              {open === \"create\" ? `Adicionar` : \"Editar\"}\n            </Button>\n          </DialogActions>\n        </Stack>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default FlowBuilderRandomizerModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}