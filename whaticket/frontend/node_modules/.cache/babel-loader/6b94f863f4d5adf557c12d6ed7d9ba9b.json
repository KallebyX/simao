{"ast":null,"code":"var _jsxFileName = \"/workspaces/simao/whaticket/frontend/src/components/TagsKanbanContainer/index.js\";\nimport { Chip, Paper, Select, MenuItem, Grid, InputLabel, FormControl } from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { isString } from \"lodash\";\nimport toastError from \"../../errors/toastError\";\nimport api from \"../../services/api\";\nimport { toast } from \"react-toastify\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { i18n } from \"../../translate/i18n\";\nimport { Field, Form } from \"formik\";\nconst useStyles = makeStyles(theme => ({\n  menuListItem: {\n    paddingTop: 0,\n    paddingBottom: 0,\n    border: \"none\"\n  },\n  menuItem: {\n    maxHeight: 30\n  },\n  chips: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  chip: {\n    margin: 2\n  }\n}));\nexport function TagsKanbanContainer({\n  ticket\n}) {\n  const classes = useStyles();\n  const [tags, setTags] = useState([]);\n  const [selected, setSelected] = useState(\"\"); // Alterado de null para \"\"\n\n  useEffect(() => {\n    let isMounted = true;\n    loadTags(isMounted).then(() => {\n      if (ticket.tags && ticket.tags.length > 0) {\n        setSelected(ticket.tags[0].id); // Alterado para pegar o ID da primeira tag, se existir\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [ticket.tags]);\n  const loadTags = async isMounted => {\n    try {\n      const {\n        data\n      } = await api.get(`/tags/list`, {\n        params: {\n          kanban: 1\n        }\n      });\n      if (isMounted) {\n        setTags(data);\n      }\n    } catch (err) {\n      toastError(err);\n    }\n  };\n  const onChange = async e => {\n    const value = e.target.value;\n    if (ticket.tags.length > 0) {\n      await api.delete(`/ticket-tags/${ticket.id}`);\n      // toast.success('Ticket Tag Removido!');\n    }\n    if (value !== null) {\n      await api.put(`/ticket-tags/${ticket.id}/${value}`);\n      // toast.success('Ticket Tag Adicionado com Sucesso!');\n    }\n    setSelected(value);\n    // Adicione sua lógica de manipulação de tags aqui\n  };\n  const renderSelectedValue = () => {\n    const selectedTag = tags.find(tag => tag.id === selected);\n    if (!selectedTag) return null;\n    return /*#__PURE__*/React.createElement(Chip, {\n      style: {\n        backgroundColor: selectedTag.color,\n        color: \"#FFF\",\n        marginRight: 1,\n        padding: 1,\n        fontWeight: 'bold',\n        paddingLeft: 5,\n        paddingRight: 5,\n        borderRadius: 3,\n        fontSize: \"0.8em\",\n        whiteSpace: \"nowrap\"\n      },\n      label: selectedTag.name,\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    });\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FormControl, {\n    fullWidth: true,\n    margin: \"dense\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    id: \"tag-kanban-id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, i18n.t(\"Etapa Kanban\")), /*#__PURE__*/React.createElement(Select, {\n    labelWidth: 60,\n    value: selected,\n    labelId: \"tag-kanban-id\",\n    label: i18n.t(\"Etapa Kanban\"),\n    onChange: onChange,\n    MenuProps: {\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"left\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"left\"\n      },\n      getContentAnchorEl: null\n    },\n    renderValue: renderSelectedValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, \"\\xA0\"), tags.map(tag => /*#__PURE__*/React.createElement(MenuItem, {\n    key: tag.id,\n    value: tag.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, tag.name)))));\n}","map":{"version":3,"names":["Chip","Paper","Select","MenuItem","Grid","InputLabel","FormControl","React","useEffect","useRef","useState","isString","toastError","api","toast","makeStyles","i18n","Field","Form","useStyles","theme","menuListItem","paddingTop","paddingBottom","border","menuItem","maxHeight","chips","display","flexWrap","chip","margin","TagsKanbanContainer","ticket","classes","tags","setTags","selected","setSelected","isMounted","loadTags","then","length","id","data","get","params","kanban","err","onChange","e","value","target","delete","put","renderSelectedValue","selectedTag","find","tag","createElement","style","backgroundColor","color","marginRight","padding","fontWeight","paddingLeft","paddingRight","borderRadius","fontSize","whiteSpace","label","name","size","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","fullWidth","variant","t","labelWidth","labelId","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","renderValue","map","key"],"sources":["/workspaces/simao/whaticket/frontend/src/components/TagsKanbanContainer/index.js"],"sourcesContent":["import { Chip, Paper, Select, MenuItem, Grid, InputLabel, FormControl } from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { isString } from \"lodash\";\nimport toastError from \"../../errors/toastError\";\nimport api from \"../../services/api\";\nimport { toast } from \"react-toastify\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { i18n } from \"../../translate/i18n\";\nimport { Field, Form } from \"formik\";\nconst useStyles = makeStyles((theme) => ({\n    menuListItem: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        border: \"none\",\n    },\n    menuItem: {\n        maxHeight: 30,\n    },\n\n    chips: {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n    },\n    chip: {\n        margin: 2,\n    },\n}));\nexport function TagsKanbanContainer({ ticket }) {\n    const classes = useStyles();\n\n    const [tags, setTags] = useState([]);\n    const [selected, setSelected] = useState(\"\"); // Alterado de null para \"\"\n\n    useEffect(() => {\n        let isMounted = true;\n        loadTags(isMounted).then(() => {\n            if (ticket.tags && ticket.tags.length > 0) {\n                setSelected(ticket.tags[0].id); // Alterado para pegar o ID da primeira tag, se existir\n            }\n        });\n\n        return () => {\n            isMounted = false;\n        };\n    }, [ticket.tags]);\n\n    const loadTags = async (isMounted) => {\n        try {\n            const { data } = await api.get(`/tags/list`, { params: { kanban: 1 } });\n            if (isMounted) {\n                setTags(data);\n            }\n        } catch (err) {\n            toastError(err);\n        }\n    }\n\n    const onChange = async (e) => {\n        const value = e.target.value;\n        if (ticket.tags.length > 0) {\n            await api.delete(`/ticket-tags/${ticket.id}`);\n            // toast.success('Ticket Tag Removido!');\n        }\n        if (value !== null) {\n            await api.put(`/ticket-tags/${ticket.id}/${value}`);\n            // toast.success('Ticket Tag Adicionado com Sucesso!');\n        }\n        setSelected(value);\n        // Adicione sua lógica de manipulação de tags aqui\n    }\n\n    const renderSelectedValue = () => {\n        const selectedTag = tags.find(tag => tag.id === selected);\n        if (!selectedTag) return null;\n\n        return (\n            <Chip\n                style={{\n                    backgroundColor: selectedTag.color,\n                    color: \"#FFF\",\n                    marginRight: 1,\n                    padding: 1,\n                    fontWeight: 'bold',\n                    paddingLeft: 5,\n                    paddingRight: 5,\n                    borderRadius: 3,\n                    fontSize: \"0.8em\",\n                    whiteSpace: \"nowrap\"\n                }}\n                label={selectedTag.name}\n                size=\"small\"\n            />\n        );\n    };\n\n    return (\n        <>\n            <FormControl fullWidth margin=\"dense\" variant=\"outlined\">\n                <InputLabel id=\"tag-kanban-id\">{i18n.t(\"Etapa Kanban\")}</InputLabel>\n                <Select\n                    labelWidth={60}\n                    value={selected}\n                    labelId=\"tag-kanban-id\"\n                    label={i18n.t(\"Etapa Kanban\")}\n                    onChange={onChange}\n                    MenuProps={{\n                        anchorOrigin: {\n                            vertical: \"bottom\",\n                            horizontal: \"left\",\n                        },\n                        transformOrigin: {\n                            vertical: \"top\",\n                            horizontal: \"left\",\n                        },\n                        getContentAnchorEl: null,\n                    }}\n                    renderValue={renderSelectedValue}\n                >\n                    <MenuItem value={null}>&nbsp;</MenuItem>\n                    {tags.map(tag => (\n                        <MenuItem key={tag.id} value={tag.id}>\n                            {tag.name}\n                        </MenuItem>\n                    ))}\n                </Select>\n            </FormControl>\n        </>\n    )\n}\n"],"mappings":";AAAA,SAASA,IAAI,EAAEC,KAAK,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,UAAU,EAAEC,WAAW,QAAQ,mBAAmB;AAChG,OAAOC,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,QAAQ,QAAQ,QAAQ;AACjC,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,GAAG,MAAM,oBAAoB;AACpC,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,UAAU,QAAQ,0BAA0B;AACrD,SAASC,IAAI,QAAQ,sBAAsB;AAC3C,SAASC,KAAK,EAAEC,IAAI,QAAQ,QAAQ;AACpC,MAAMC,SAAS,GAAGJ,UAAU,CAAEK,KAAK,KAAM;EACrCC,YAAY,EAAE;IACVC,UAAU,EAAE,CAAC;IACbC,aAAa,EAAE,CAAC;IAChBC,MAAM,EAAE;EACZ,CAAC;EACDC,QAAQ,EAAE;IACNC,SAAS,EAAE;EACf,CAAC;EAEDC,KAAK,EAAE;IACHC,OAAO,EAAE,MAAM;IACfC,QAAQ,EAAE;EACd,CAAC;EACDC,IAAI,EAAE;IACFC,MAAM,EAAE;EACZ;AACJ,CAAC,CAAC,CAAC;AACH,OAAO,SAASC,mBAAmBA,CAAC;EAAEC;AAAO,CAAC,EAAE;EAC5C,MAAMC,OAAO,GAAGf,SAAS,CAAC,CAAC;EAE3B,MAAM,CAACgB,IAAI,EAAEC,OAAO,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAAC2B,QAAQ,EAAEC,WAAW,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAE9CF,SAAS,CAAC,MAAM;IACZ,IAAI+B,SAAS,GAAG,IAAI;IACpBC,QAAQ,CAACD,SAAS,CAAC,CAACE,IAAI,CAAC,MAAM;MAC3B,IAAIR,MAAM,CAACE,IAAI,IAAIF,MAAM,CAACE,IAAI,CAACO,MAAM,GAAG,CAAC,EAAE;QACvCJ,WAAW,CAACL,MAAM,CAACE,IAAI,CAAC,CAAC,CAAC,CAACQ,EAAE,CAAC,CAAC,CAAC;MACpC;IACJ,CAAC,CAAC;IAEF,OAAO,MAAM;MACTJ,SAAS,GAAG,KAAK;IACrB,CAAC;EACL,CAAC,EAAE,CAACN,MAAM,CAACE,IAAI,CAAC,CAAC;EAEjB,MAAMK,QAAQ,GAAG,MAAOD,SAAS,IAAK;IAClC,IAAI;MACA,MAAM;QAAEK;MAAK,CAAC,GAAG,MAAM/B,GAAG,CAACgC,GAAG,CAAC,YAAY,EAAE;QAAEC,MAAM,EAAE;UAAEC,MAAM,EAAE;QAAE;MAAE,CAAC,CAAC;MACvE,IAAIR,SAAS,EAAE;QACXH,OAAO,CAACQ,IAAI,CAAC;MACjB;IACJ,CAAC,CAAC,OAAOI,GAAG,EAAE;MACVpC,UAAU,CAACoC,GAAG,CAAC;IACnB;EACJ,CAAC;EAED,MAAMC,QAAQ,GAAG,MAAOC,CAAC,IAAK;IAC1B,MAAMC,KAAK,GAAGD,CAAC,CAACE,MAAM,CAACD,KAAK;IAC5B,IAAIlB,MAAM,CAACE,IAAI,CAACO,MAAM,GAAG,CAAC,EAAE;MACxB,MAAM7B,GAAG,CAACwC,MAAM,CAAC,gBAAgBpB,MAAM,CAACU,EAAE,EAAE,CAAC;MAC7C;IACJ;IACA,IAAIQ,KAAK,KAAK,IAAI,EAAE;MAChB,MAAMtC,GAAG,CAACyC,GAAG,CAAC,gBAAgBrB,MAAM,CAACU,EAAE,IAAIQ,KAAK,EAAE,CAAC;MACnD;IACJ;IACAb,WAAW,CAACa,KAAK,CAAC;IAClB;EACJ,CAAC;EAED,MAAMI,mBAAmB,GAAGA,CAAA,KAAM;IAC9B,MAAMC,WAAW,GAAGrB,IAAI,CAACsB,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACf,EAAE,KAAKN,QAAQ,CAAC;IACzD,IAAI,CAACmB,WAAW,EAAE,OAAO,IAAI;IAE7B,oBACIjD,KAAA,CAAAoD,aAAA,CAAC3D,IAAI;MACD4D,KAAK,EAAE;QACHC,eAAe,EAAEL,WAAW,CAACM,KAAK;QAClCA,KAAK,EAAE,MAAM;QACbC,WAAW,EAAE,CAAC;QACdC,OAAO,EAAE,CAAC;QACVC,UAAU,EAAE,MAAM;QAClBC,WAAW,EAAE,CAAC;QACdC,YAAY,EAAE,CAAC;QACfC,YAAY,EAAE,CAAC;QACfC,QAAQ,EAAE,OAAO;QACjBC,UAAU,EAAE;MAChB,CAAE;MACFC,KAAK,EAAEf,WAAW,CAACgB,IAAK;MACxBC,IAAI,EAAC,OAAO;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CACf,CAAC;EAEV,CAAC;EAED,oBACIxE,KAAA,CAAAoD,aAAA,CAAApD,KAAA,CAAAyE,QAAA,qBACIzE,KAAA,CAAAoD,aAAA,CAACrD,WAAW;IAAC2E,SAAS;IAAClD,MAAM,EAAC,OAAO;IAACmD,OAAO,EAAC,UAAU;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACpDxE,KAAA,CAAAoD,aAAA,CAACtD,UAAU;IAACsC,EAAE,EAAC,eAAe;IAAA+B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAE/D,IAAI,CAACmE,CAAC,CAAC,cAAc,CAAc,CAAC,eACpE5E,KAAA,CAAAoD,aAAA,CAACzD,MAAM;IACHkF,UAAU,EAAE,EAAG;IACfjC,KAAK,EAAEd,QAAS;IAChBgD,OAAO,EAAC,eAAe;IACvBd,KAAK,EAAEvD,IAAI,CAACmE,CAAC,CAAC,cAAc,CAAE;IAC9BlC,QAAQ,EAAEA,QAAS;IACnBqC,SAAS,EAAE;MACPC,YAAY,EAAE;QACVC,QAAQ,EAAE,QAAQ;QAClBC,UAAU,EAAE;MAChB,CAAC;MACDC,eAAe,EAAE;QACbF,QAAQ,EAAE,KAAK;QACfC,UAAU,EAAE;MAChB,CAAC;MACDE,kBAAkB,EAAE;IACxB,CAAE;IACFC,WAAW,EAAErC,mBAAoB;IAAAmB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEjCxE,KAAA,CAAAoD,aAAA,CAACxD,QAAQ;IAACgD,KAAK,EAAE,IAAK;IAAAuB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,MAAgB,CAAC,EACvC5C,IAAI,CAAC0D,GAAG,CAACnC,GAAG,iBACTnD,KAAA,CAAAoD,aAAA,CAACxD,QAAQ;IAAC2F,GAAG,EAAEpC,GAAG,CAACf,EAAG;IAACQ,KAAK,EAAEO,GAAG,CAACf,EAAG;IAAA+B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAChCrB,GAAG,CAACc,IACC,CACb,CACG,CACC,CACf,CAAC;AAEX","ignoreList":[]},"metadata":{},"sourceType":"module"}