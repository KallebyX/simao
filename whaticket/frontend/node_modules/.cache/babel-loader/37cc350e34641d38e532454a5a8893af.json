{"ast":null,"code":"var _jsxFileName = \"/workspaces/simao/whaticket/frontend/src/pages/FlowDefault/index.js\";\nimport React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TextField from \"@material-ui/core/TextField\";\nimport api from \"../../services/api\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport { i18n } from \"../../translate/i18n\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport MainContainer from \"../../components/MainContainer\";\nimport toastError from \"../../errors/toastError\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport NewTicketModal from \"../../components/NewTicketModal\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\nimport { AddCircle, Build, ContentCopy, DevicesFold, MoreVert, WebhookOutlined } from \"@mui/icons-material\";\nimport { Autocomplete, Button, Chip, CircularProgress, Grid, Menu, MenuItem, Stack, Typography } from \"@mui/material\";\nimport FlowBuilderModal from \"../../components/FlowBuilderModal\";\nimport { colorBackgroundTable, colorLineTable, colorLineTableHover, colorPrimary, colorTitleTable, colorTopTable } from \"../../styles/styles\";\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_CONTACTS\") {\n    const contacts = action.payload;\n    const newContacts = [];\n    contacts.forEach(contact => {\n      const contactIndex = state.findIndex(c => c.id === contact.id);\n      if (contactIndex !== -1) {\n        state[contactIndex] = contact;\n      } else {\n        newContacts.push(contact);\n      }\n    });\n    return [...state, ...newContacts];\n  }\n  if (action.type === \"UPDATE_CONTACTS\") {\n    const contact = action.payload;\n    const contactIndex = state.findIndex(c => c.id === contact.id);\n    if (contactIndex !== -1) {\n      state[contactIndex] = contact;\n      return [...state];\n    } else {\n      return [contact, ...state];\n    }\n  }\n  if (action.type === \"DELETE_CONTACT\") {\n    const contactId = action.payload;\n    const contactIndex = state.findIndex(c => c.id === contactId);\n    if (contactIndex !== -1) {\n      state.splice(contactIndex, 1);\n    }\n    return [...state];\n  }\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\nconst useStyles = makeStyles(theme => ({\n  mainPaper: {\n    flex: 1,\n    backgroundColor: \"#ffff\",\n    borderRadius: 12,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles\n  }\n}));\nconst FlowDefault = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const [loading, setLoading] = useState(true);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [contacts, dispatch] = useReducer(reducer, []);\n  const [webhooks, setWebhooks] = useState([]);\n  const [selectedContactId, setSelectedContactId] = useState(null);\n  const [selectedWebhookName, setSelectedWebhookName] = useState(null);\n  const [contactModalOpen, setContactModalOpen] = useState(false);\n  const [newTicketModalOpen, setNewTicketModalOpen] = useState(false);\n  const [contactTicket, setContactTicket] = useState({});\n  const [deletingContact, setDeletingContact] = useState(null);\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const [confirmDuplicateOpen, setConfirmDuplicateOpen] = useState(false);\n  const [configExist, setConfigExist] = useState(false);\n  const [flowsData, setFlowsData] = useState([]);\n  const [flowsDataObj, setFlowsDataObj] = useState([]);\n  const [flowSelectedWelcome, setFlowSelectedWelcome] = useState(null);\n  const [flowSelectedPhrase, setFlowSelectedPhrase] = useState(null);\n  const [hasMore, setHasMore] = useState(false);\n  const [reloadData, setReloadData] = useState(false);\n  const {\n    user,\n    socket\n  } = useContext(AuthContext);\n  useEffect(() => {\n    dispatch({\n      type: \"RESET\"\n    });\n    setPageNumber(1);\n  }, [searchParam]);\n  const getFlows = async () => {\n    return await api.get(\"/flowbuilder\").then(res => {\n      setFlowsData(res.data.flows.map(flow => flow.name));\n      setFlowsDataObj(res.data.flows);\n      return res.data.flows;\n    });\n  };\n  const getFlowsDefault = async flowData => {\n    await api.get(\"/flowdefault\").then(res => {\n      var _res$data$flow, _res$data$flow2, _res$data$flow3;\n      if ((_res$data$flow = res.data.flow) === null || _res$data$flow === void 0 ? void 0 : _res$data$flow.companyId) {\n        setConfigExist(true);\n      }\n      if ((_res$data$flow2 = res.data.flow) === null || _res$data$flow2 === void 0 ? void 0 : _res$data$flow2.flowIdWelcome) {\n        const flowName = flowData.filter(item => item.id === res.data.flow.flowIdWelcome);\n        if (flowName.length > 0) {\n          setFlowSelectedWelcome(flowName[0].name);\n        } else {\n          setFlowSelectedWelcome();\n        }\n      }\n      if ((_res$data$flow3 = res.data.flow) === null || _res$data$flow3 === void 0 ? void 0 : _res$data$flow3.flowIdNotPhrase) {\n        const flowName = flowData.filter(item => item.id === res.data.flow.flowIdNotPhrase);\n        if (flowName.length > 0) {\n          setFlowSelectedPhrase(flowName[0].name);\n        } else {\n          setFlowSelectedPhrase();\n        }\n      }\n      setLoading(false);\n    });\n  };\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const onContact = data => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({\n          type: \"UPDATE_CONTACTS\",\n          payload: data.contact\n        });\n      }\n      if (data.action === \"delete\") {\n        dispatch({\n          type: \"DELETE_CONTACT\",\n          payload: +data.contactId\n        });\n      }\n    };\n    socket.on(`company-${companyId}-contact`, onContact);\n    getFlows().then(res => {\n      getFlowsDefault(res);\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n  const handleCloseContactModal = () => {\n    setSelectedContactId(null);\n    setContactModalOpen(false);\n  };\n  const handleCloseOrOpenTicket = ticket => {\n    setNewTicketModalOpen(false);\n    if (ticket !== undefined && ticket.uuid !== undefined) {\n      history.push(`/tickets/${ticket.uuid}`);\n    }\n  };\n  const handleDeleteWebhook = async webhookId => {\n    try {\n      await api.delete(`/flowbuilder/${webhookId}`).then(res => {\n        setDeletingContact(null);\n        setReloadData(old => !old);\n      });\n      toast.success(\"Fluxo excluído com sucesso\");\n    } catch (err) {\n      toastError(err);\n    }\n  };\n  const handleSaveDefault = async () => {\n    console.log(configExist);\n    let idWelcome = flowsDataObj.filter(item => item.name === flowSelectedWelcome);\n    let idPhrase = flowsDataObj.filter(item => item.name === flowSelectedPhrase);\n    if (idWelcome.length === 0) {\n      idWelcome = null;\n    } else {\n      idWelcome = idWelcome[0].id;\n    }\n    if (idPhrase.length === 0) {\n      idPhrase = null;\n    } else {\n      idPhrase = idPhrase[0].id;\n    }\n    if (configExist) {\n      try {\n        await api.put(`/flowdefault`, {\n          flowIdWelcome: idWelcome,\n          flowIdPhrase: idPhrase\n        }).then(res => {\n          setDeletingContact(null);\n          setReloadData(old => !old);\n        });\n        toast.success(\"Fluxos padrões atualizados\");\n      } catch (err) {\n        toastError(err);\n      }\n    } else {\n      try {\n        await api.post(`/flowdefault`, {\n          flowIdWelcome: idWelcome,\n          flowIdPhrase: idPhrase\n        }).then(res => {\n          setDeletingContact(null);\n          setReloadData(old => !old);\n        });\n        toast.success(\"Fluxos padrões atualizados\");\n      } catch (err) {\n        toastError(err);\n      }\n    }\n  };\n  const loadMore = () => {\n    setPageNumber(prevState => prevState + 1);\n  };\n  return /*#__PURE__*/React.createElement(MainContainer, {\n    className: classes.mainContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NewTicketModal, {\n    modalOpen: newTicketModalOpen,\n    initialContact: contactTicket,\n    onClose: ticket => {\n      handleCloseOrOpenTicket(ticket);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FlowBuilderModal, {\n    open: contactModalOpen,\n    onClose: handleCloseContactModal,\n    \"aria-labelledby\": \"form-dialog-title\",\n    flowId: selectedContactId,\n    nameWebhook: selectedWebhookName,\n    onSave: () => setReloadData(old => !old),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ConfirmationModal, {\n    title: deletingContact ? `${i18n.t(\"contacts.confirmationModal.deleteTitle\")} ${deletingContact.name}?` : `${i18n.t(\"contacts.confirmationModal.importTitlte\")}`,\n    open: confirmOpen,\n    onClose: setConfirmOpen,\n    onConfirm: e => deletingContact ? handleDeleteWebhook(deletingContact.id) : () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }\n  }, deletingContact ? `Tem certeza que deseja deletar este fluxo? Todas as integrações relacionados serão perdidos.` : `${i18n.t(\"contacts.confirmationModal.importMessage\")}`), /*#__PURE__*/React.createElement(MainHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 9\n    }\n  }, \"Fluxo padr\\xE3o\")), /*#__PURE__*/React.createElement(Paper, {\n    className: classes.mainPaper,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    sx: {\n      padding: '12px',\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    sx: {\n      position: 'absolute',\n      right: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => handleSaveDefault(),\n    variant: \"contained\",\n    sx: {\n      backgroundColor: colorPrimary(),\n      '&:hover': {\n        backgroundColor: `${colorPrimary()}90`\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 13\n    }\n  }, \"Salvar\")), /*#__PURE__*/React.createElement(Stack, {\n    gap: '12px',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    fontSize: 18,\n    fontWeight: 700,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 13\n    }\n  }, \"Fluxo de boas vindas\"), /*#__PURE__*/React.createElement(Typography, {\n    fontSize: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }\n  }, \"Este fluxo \\xE9 disparado apenas para novos contatos, pessoas que voce n\\xE3o possui em sua lista de contatos e que mandaram uma mensagem\"), !loading && /*#__PURE__*/React.createElement(Autocomplete, {\n    disablePortal: true,\n    id: \"combo-box-demo\",\n    value: flowSelectedWelcome,\n    options: flowsData,\n    onChange: (event, newValue) => {\n      setFlowSelectedWelcome(newValue);\n    },\n    sx: {\n      width: \"100%\"\n    },\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      variant: \"outlined\",\n      placeholder: \"Escolha um fluxo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 17\n      }\n    })),\n    renderTags: (value, getTagProps) => value.map((option, index) => /*#__PURE__*/React.createElement(Chip, Object.assign({\n      variant: \"outlined\",\n      label: option\n    }, getTagProps({\n      index\n    }), {\n      style: {\n        borderRadius: \"8px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 19\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 27\n    }\n  }), loading && /*#__PURE__*/React.createElement(Stack, {\n    alignSelf: 'center',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    sx: {\n      color: colorPrimary()\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Stack, {\n    gap: '12px',\n    marginTop: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    fontSize: 18,\n    fontWeight: 700,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 13\n    }\n  }, \"Fluxo de resposta padr\\xE3o\"), /*#__PURE__*/React.createElement(Typography, {\n    fontSize: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 13\n    }\n  }, \"Resposta Padr\\xE3o \\xE9 enviada com qualquer caractere diferente de uma palavra chave. ATEN\\xC7\\xC3O! Ser\\xE1 disparada se o atendimento ja estiver fechado e passado 6 horas do seu fechamento.\"), !loading && /*#__PURE__*/React.createElement(Autocomplete, {\n    disablePortal: true,\n    id: \"combo-box-demo\",\n    value: flowSelectedPhrase,\n    options: flowsData,\n    onChange: (event, newValue) => {\n      setFlowSelectedPhrase(newValue);\n    },\n    sx: {\n      width: \"100%\"\n    },\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      variant: \"outlined\",\n      placeholder: \"Escolha um fluxo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 17\n      }\n    })),\n    renderTags: (value, getTagProps) => value.map((option, index) => /*#__PURE__*/React.createElement(Chip, Object.assign({\n      variant: \"outlined\",\n      label: option\n    }, getTagProps({\n      index\n    }), {\n      style: {\n        borderRadius: \"8px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 19\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 27\n    }\n  }), loading && /*#__PURE__*/React.createElement(Stack, {\n    alignSelf: 'center',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    sx: {\n      color: colorPrimary()\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 15\n    }\n  }))))));\n};\nexport default FlowDefault;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","toast","useHistory","makeStyles","Paper","TextField","api","ConfirmationModal","i18n","MainHeader","Title","MainContainer","toastError","AuthContext","NewTicketModal","SocketContext","AddCircle","Build","ContentCopy","DevicesFold","MoreVert","WebhookOutlined","Autocomplete","Button","Chip","CircularProgress","Grid","Menu","MenuItem","Stack","Typography","FlowBuilderModal","colorBackgroundTable","colorLineTable","colorLineTableHover","colorPrimary","colorTitleTable","colorTopTable","reducer","state","action","type","contacts","payload","newContacts","forEach","contact","contactIndex","findIndex","c","id","push","contactId","splice","useStyles","theme","mainPaper","flex","backgroundColor","borderRadius","padding","spacing","overflowY","scrollbarStyles","FlowDefault","classes","history","loading","setLoading","pageNumber","setPageNumber","searchParam","setSearchParam","dispatch","webhooks","setWebhooks","selectedContactId","setSelectedContactId","selectedWebhookName","setSelectedWebhookName","contactModalOpen","setContactModalOpen","newTicketModalOpen","setNewTicketModalOpen","contactTicket","setContactTicket","deletingContact","setDeletingContact","confirmOpen","setConfirmOpen","confirmDuplicateOpen","setConfirmDuplicateOpen","configExist","setConfigExist","flowsData","setFlowsData","flowsDataObj","setFlowsDataObj","flowSelectedWelcome","setFlowSelectedWelcome","flowSelectedPhrase","setFlowSelectedPhrase","hasMore","setHasMore","reloadData","setReloadData","user","socket","getFlows","get","then","res","data","flows","map","flow","name","getFlowsDefault","flowData","_res$data$flow","_res$data$flow2","_res$data$flow3","companyId","flowIdWelcome","flowName","filter","item","length","flowIdNotPhrase","localStorage","getItem","onContact","on","disconnect","handleCloseContactModal","handleCloseOrOpenTicket","ticket","undefined","uuid","handleDeleteWebhook","webhookId","delete","old","success","err","handleSaveDefault","console","log","idWelcome","idPhrase","put","flowIdPhrase","post","loadMore","prevState","createElement","className","mainContainer","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","modalOpen","initialContact","onClose","open","flowId","nameWebhook","onSave","title","t","onConfirm","e","variant","sx","position","right","onClick","gap","fontSize","fontWeight","disablePortal","value","options","onChange","event","newValue","width","renderInput","params","Object","assign","placeholder","renderTags","getTagProps","option","index","label","style","alignSelf","color","marginTop"],"sources":["/workspaces/simao/whaticket/frontend/src/pages/FlowDefault/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useContext } from \"react\";\n\nimport { toast } from \"react-toastify\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TextField from \"@material-ui/core/TextField\";\n\nimport api from \"../../services/api\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport MainContainer from \"../../components/MainContainer\";\nimport toastError from \"../../errors/toastError\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport NewTicketModal from \"../../components/NewTicketModal\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\n\nimport {\n  AddCircle,\n  Build,\n  ContentCopy,\n  DevicesFold,\n  MoreVert,\n  WebhookOutlined\n} from \"@mui/icons-material\";\nimport {\n  Autocomplete,\n  Button,\n  Chip,\n  CircularProgress,\n  Grid,\n  Menu,\n  MenuItem,\n  Stack,\n  Typography\n} from \"@mui/material\";\nimport FlowBuilderModal from \"../../components/FlowBuilderModal\";\nimport {\n  colorBackgroundTable,\n  colorLineTable,\n  colorLineTableHover,\n  colorPrimary,\n  colorTitleTable,\n  colorTopTable\n} from \"../../styles/styles\";\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_CONTACTS\") {\n    const contacts = action.payload;\n    const newContacts = [];\n\n    contacts.forEach(contact => {\n      const contactIndex = state.findIndex(c => c.id === contact.id);\n      if (contactIndex !== -1) {\n        state[contactIndex] = contact;\n      } else {\n        newContacts.push(contact);\n      }\n    });\n\n    return [...state, ...newContacts];\n  }\n\n  if (action.type === \"UPDATE_CONTACTS\") {\n    const contact = action.payload;\n    const contactIndex = state.findIndex(c => c.id === contact.id);\n\n    if (contactIndex !== -1) {\n      state[contactIndex] = contact;\n      return [...state];\n    } else {\n      return [contact, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_CONTACT\") {\n    const contactId = action.payload;\n\n    const contactIndex = state.findIndex(c => c.id === contactId);\n    if (contactIndex !== -1) {\n      state.splice(contactIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst useStyles = makeStyles(theme => ({\n  mainPaper: {\n    flex: 1,\n    backgroundColor: \"#ffff\",\n    borderRadius: 12,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles\n  }\n}));\n\nconst FlowDefault = () => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const [loading, setLoading] = useState(true);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [contacts, dispatch] = useReducer(reducer, []);\n  const [webhooks, setWebhooks] = useState([]);\n  const [selectedContactId, setSelectedContactId] = useState(null);\n  const [selectedWebhookName, setSelectedWebhookName] = useState(null);\n  const [contactModalOpen, setContactModalOpen] = useState(false);\n  const [newTicketModalOpen, setNewTicketModalOpen] = useState(false);\n  const [contactTicket, setContactTicket] = useState({});\n  const [deletingContact, setDeletingContact] = useState(null);\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const [confirmDuplicateOpen, setConfirmDuplicateOpen] = useState(false);\n\n  const [configExist, setConfigExist] = useState(false)\n\n  const [flowsData, setFlowsData] = useState([]);\n  const [flowsDataObj, setFlowsDataObj] = useState([]);\n\n  const [flowSelectedWelcome, setFlowSelectedWelcome] = useState(null);\n\n  const [flowSelectedPhrase, setFlowSelectedPhrase] = useState(null);\n\n  const [hasMore, setHasMore] = useState(false);\n  const [reloadData, setReloadData] = useState(false);\n\n const { user, socket } = useContext(AuthContext);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam]);\n\n  const getFlows = async () => {\n    return await api.get(\"/flowbuilder\").then(res => {\n      setFlowsData(res.data.flows.map(flow => flow.name));\n      setFlowsDataObj(res.data.flows);\n      return res.data.flows\n    });\n  };\n\n  const getFlowsDefault = async (flowData) => {\n    await api.get(\"/flowdefault\").then(res => {\n      if (res.data.flow?.companyId) {\n        setConfigExist(true)\n      }\n      if (res.data.flow?.flowIdWelcome) {\n        const flowName = flowData.filter(item => item.id === res.data.flow.flowIdWelcome)\n        if (flowName.length > 0) {\n          setFlowSelectedWelcome(flowName[0].name);\n        } else {\n          setFlowSelectedWelcome()\n        }\n\n      }\n      if (res.data.flow?.flowIdNotPhrase) {\n        const flowName = flowData.filter(item => item.id === res.data.flow.flowIdNotPhrase)\n        if (flowName.length > 0) {\n          setFlowSelectedPhrase(flowName[0].name);\n        } else {\n          setFlowSelectedPhrase();\n        }\n\n      }\n      setLoading(false)\n    });\n  };\n\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n\n    const onContact = (data) => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({ type: \"UPDATE_CONTACTS\", payload: data.contact });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_CONTACT\", payload: +data.contactId });\n      }\n    }\n\n    socket.on(`company-${companyId}-contact`, onContact);\n\n    getFlows().then(res => {\n      getFlowsDefault(res)\n    })\n    \n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n\n\n  const handleCloseContactModal = () => {\n    setSelectedContactId(null);\n    setContactModalOpen(false);\n  };\n\n  const handleCloseOrOpenTicket = ticket => {\n    setNewTicketModalOpen(false);\n    if (ticket !== undefined && ticket.uuid !== undefined) {\n      history.push(`/tickets/${ticket.uuid}`);\n    }\n  };\n\n  const handleDeleteWebhook = async webhookId => {\n    try {\n      await api.delete(`/flowbuilder/${webhookId}`).then(res => {\n        setDeletingContact(null);\n        setReloadData(old => !old);\n      });\n      toast.success(\"Fluxo excluído com sucesso\");\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const handleSaveDefault = async () => {\n    console.log(configExist)\n\n    let idWelcome = flowsDataObj.filter(item => item.name === flowSelectedWelcome)\n    let idPhrase = flowsDataObj.filter(item => item.name === flowSelectedPhrase)\n    if (idWelcome.length === 0) {\n      idWelcome = null\n    } else {\n      idWelcome = idWelcome[0].id\n    }\n    if (idPhrase.length === 0) {\n      idPhrase = null\n    } else {\n      idPhrase = idPhrase[0].id\n    }\n\n    if (configExist) {\n      try {\n        await api.put(`/flowdefault`, { flowIdWelcome: idWelcome, flowIdPhrase: idPhrase }).then(res => {\n          setDeletingContact(null);\n          setReloadData(old => !old);\n        });\n        toast.success(\"Fluxos padrões atualizados\");\n      } catch (err) {\n        toastError(err);\n      }\n    } else {\n      try {\n        await api.post(`/flowdefault`, { flowIdWelcome: idWelcome, flowIdPhrase: idPhrase }).then(res => {\n          setDeletingContact(null);\n          setReloadData(old => !old);\n        });\n        toast.success(\"Fluxos padrões atualizados\");\n      } catch (err) {\n        toastError(err);\n      }\n    }\n\n  };\n\n  const loadMore = () => {\n    setPageNumber(prevState => prevState + 1);\n  };\n\n  return (\n    <MainContainer className={classes.mainContainer}>\n      <NewTicketModal\n        modalOpen={newTicketModalOpen}\n        initialContact={contactTicket}\n        onClose={ticket => {\n          handleCloseOrOpenTicket(ticket);\n        }}\n      />\n      <FlowBuilderModal\n        open={contactModalOpen}\n        onClose={handleCloseContactModal}\n        aria-labelledby=\"form-dialog-title\"\n        flowId={selectedContactId}\n        nameWebhook={selectedWebhookName}\n        onSave={() => setReloadData(old => !old)}\n      ></FlowBuilderModal>\n      <ConfirmationModal\n        title={\n          deletingContact\n            ? `${i18n.t(\"contacts.confirmationModal.deleteTitle\")} ${deletingContact.name\n            }?`\n            : `${i18n.t(\"contacts.confirmationModal.importTitlte\")}`\n        }\n        open={confirmOpen}\n        onClose={setConfirmOpen}\n        onConfirm={e =>\n          deletingContact ? handleDeleteWebhook(deletingContact.id) : () => { }\n        }\n      >\n        {deletingContact\n          ? `Tem certeza que deseja deletar este fluxo? Todas as integrações relacionados serão perdidos.`\n          : `${i18n.t(\"contacts.confirmationModal.importMessage\")}`}\n      </ConfirmationModal>\n      <MainHeader>\n        <Title>Fluxo padrão</Title>\n      </MainHeader>\n      <Paper\n        className={classes.mainPaper}\n        variant=\"outlined\"\n      >\n        <Stack sx={{ padding: '12px', position: 'relative' }}>\n          <Stack sx={{ position: 'absolute', right: 0 }}>\n            <Button onClick={() => handleSaveDefault()} variant=\"contained\" sx={{\n              backgroundColor: colorPrimary(), '&:hover': {\n                backgroundColor: `${colorPrimary()}90`\n              }\n            }}>Salvar</Button>\n          </Stack>\n          <Stack gap={'12px'}>\n            <Typography fontSize={18} fontWeight={700}>Fluxo de boas vindas</Typography>\n            <Typography fontSize={12}>\n              Este fluxo é disparado apenas para novos contatos, pessoas que voce\n              não possui em sua lista de contatos e que mandaram uma mensagem\n            </Typography>\n            {!loading && (<Autocomplete\n              disablePortal\n              id=\"combo-box-demo\"\n              value={flowSelectedWelcome}\n              options={flowsData}\n              onChange={(event, newValue) => {\n                setFlowSelectedWelcome(newValue);\n              }}\n              sx={{ width: \"100%\" }}\n              renderInput={params => (\n                <TextField\n                  {...params}\n                  variant=\"outlined\"\n                  placeholder=\"Escolha um fluxo\"\n                />\n              )}\n              renderTags={(value, getTagProps) =>\n                value.map((option, index) => (\n                  <Chip\n                    variant=\"outlined\"\n                    label={option}\n                    {...getTagProps({ index })}\n                    style={{ borderRadius: \"8px\" }}\n                  />\n                ))\n              }\n            />)}\n            {loading && (<Stack alignSelf={'center'}>\n              <CircularProgress sx={{ color: colorPrimary() }} />\n            </Stack>)}\n          </Stack>\n\n          <Stack gap={'12px'} marginTop={4}>\n            <Typography fontSize={18} fontWeight={700}>Fluxo de resposta padrão</Typography>\n            <Typography fontSize={12}>\n              Resposta Padrão é enviada com qualquer caractere diferente de uma palavra chave. ATENÇÃO! Será disparada se o atendimento ja estiver fechado e passado 6 horas do seu fechamento.\n            </Typography>\n            {!loading && (<Autocomplete\n              disablePortal\n              id=\"combo-box-demo\"\n              value={flowSelectedPhrase}\n              options={flowsData}\n              onChange={(event, newValue) => {\n                setFlowSelectedPhrase(newValue);\n              }}\n              sx={{ width: \"100%\" }}\n              renderInput={params => (\n                <TextField\n                  {...params}\n                  variant=\"outlined\"\n                  placeholder=\"Escolha um fluxo\"\n                />\n              )}\n              renderTags={(value, getTagProps) =>\n                value.map((option, index) => (\n                  <Chip\n                    variant=\"outlined\"\n                    label={option}\n                    {...getTagProps({ index })}\n                    style={{ borderRadius: \"8px\" }}\n                  />\n                ))\n              }\n            />)}\n            {loading && (<Stack alignSelf={'center'}>\n              <CircularProgress sx={{ color: colorPrimary() }} />\n            </Stack>)}\n          </Stack>\n\n        </Stack>\n      </Paper>\n    </MainContainer>\n  );\n};\n\nexport default FlowDefault;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}