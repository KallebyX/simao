{"ast":null,"code":"var _jsxFileName = \"/workspaces/simao/whaticket/frontend/src/components/AudioModal/index.js\";\nimport { Button } from \"@material-ui/core\";\nimport React, { useRef, useEffect, useState } from \"react\";\nconst LS_NAME = 'audioMessageRate';\nconst AudioModal = ({\n  url\n}) => {\n  const audioRef = useRef(null);\n  const [audioRate, setAudioRate] = useState(parseFloat(localStorage.getItem(LS_NAME) || \"1\"));\n  const [showButtonRate, setShowButtonRate] = useState(false);\n  const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n  useEffect(() => {\n    audioRef.current.playbackRate = audioRate;\n    localStorage.setItem(LS_NAME, audioRate);\n  }, [audioRate]);\n  useEffect(() => {\n    audioRef.current.onplaying = () => {\n      setShowButtonRate(true);\n    };\n    audioRef.current.onpause = () => {\n      setShowButtonRate(false);\n    };\n    audioRef.current.onended = () => {\n      setShowButtonRate(false);\n    };\n  }, []);\n  const toggleRate = () => {\n    let newRate = null;\n    switch (audioRate) {\n      case 0.5:\n        newRate = 1;\n        break;\n      case 1:\n        newRate = 1.5;\n        break;\n      case 1.5:\n        newRate = 2;\n        break;\n      case 2:\n        newRate = 0.5;\n        break;\n      default:\n        newRate = 1;\n        break;\n    }\n    setAudioRate(newRate);\n  };\n  const getAudioSource = () => {\n    let sourceUrl = url;\n    if (isIOS) {\n      sourceUrl = sourceUrl.replace(\".ogg\", \".mp3\");\n    }\n    return /*#__PURE__*/React.createElement(\"source\", {\n      src: sourceUrl,\n      type: isIOS ? \"audio/mp3\" : \"audio/ogg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    });\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"audio\", {\n    ref: audioRef,\n    controls: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, getAudioSource()), showButtonRate && /*#__PURE__*/React.createElement(Button, {\n    style: {\n      marginLeft: \"5px\",\n      marginTop: \"-45px\"\n    },\n    onClick: toggleRate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, audioRate, \"x\"));\n};\nexport default AudioModal;","map":{"version":3,"names":["Button","React","useRef","useEffect","useState","LS_NAME","AudioModal","url","audioRef","audioRate","setAudioRate","parseFloat","localStorage","getItem","showButtonRate","setShowButtonRate","isIOS","test","navigator","userAgent","window","MSStream","current","playbackRate","setItem","onplaying","onpause","onended","toggleRate","newRate","getAudioSource","sourceUrl","replace","createElement","src","type","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","ref","controls","style","marginLeft","marginTop","onClick"],"sources":["/workspaces/simao/whaticket/frontend/src/components/AudioModal/index.js"],"sourcesContent":["import { Button } from \"@material-ui/core\";\nimport React, { useRef, useEffect, useState } from \"react\";\n\nconst LS_NAME = 'audioMessageRate';\n\nconst AudioModal = ({url}) => {\n    const audioRef = useRef(null);\n    const [audioRate, setAudioRate] = useState(parseFloat(localStorage.getItem(LS_NAME) || \"1\"));\n    const [showButtonRate, setShowButtonRate] = useState(false);\n    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n  \n    useEffect(() => {\n      audioRef.current.playbackRate = audioRate;\n      localStorage.setItem(LS_NAME, audioRate);\n    }, [audioRate]);\n  \n    useEffect(() => {\n      audioRef.current.onplaying = () => {\n        setShowButtonRate(true);\n      };\n      audioRef.current.onpause = () => {\n        setShowButtonRate(false);\n      };\n      audioRef.current.onended = () => {\n        setShowButtonRate(false);\n      };\n    }, []);\n  \n    const toggleRate = () => {\n      let newRate = null;\n  \n      switch (audioRate) {\n        case 0.5:\n          newRate = 1;\n          break;\n        case 1:\n          newRate = 1.5;\n          break;\n        case 1.5:\n          newRate = 2;\n          break;\n        case 2:\n          newRate = 0.5;\n          break;\n        default:\n          newRate = 1;\n          break;\n      }\n  \n      setAudioRate(newRate);\n    };\n  \n    const getAudioSource = () => {\n      let sourceUrl = url;\n  \n      if (isIOS) {\n        sourceUrl = sourceUrl.replace(\".ogg\", \".mp3\");\n      }\n  \n      return (\n        <source src={sourceUrl} type={isIOS ? \"audio/mp3\" : \"audio/ogg\"} />\n      );\n    };\n  \n    return (\n      <>\n        <audio ref={audioRef} controls>\n          {getAudioSource()}\n        </audio>\n        {showButtonRate && (\n          <Button\n            style={{ marginLeft: \"5px\", marginTop: \"-45px\" }}\n            onClick={toggleRate}\n          >\n            {audioRate}x\n          </Button>\n        )}\n      </>\n    );\n}\n\nexport default AudioModal;"],"mappings":";AAAA,SAASA,MAAM,QAAQ,mBAAmB;AAC1C,OAAOC,KAAK,IAAIC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE1D,MAAMC,OAAO,GAAG,kBAAkB;AAElC,MAAMC,UAAU,GAAGA,CAAC;EAACC;AAAG,CAAC,KAAK;EAC1B,MAAMC,QAAQ,GAAGN,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAM,CAACO,SAAS,EAAEC,YAAY,CAAC,GAAGN,QAAQ,CAACO,UAAU,CAACC,YAAY,CAACC,OAAO,CAACR,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;EAC5F,MAAM,CAACS,cAAc,EAAEC,iBAAiB,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAMY,KAAK,GAAG,kBAAkB,CAACC,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC,IAAI,CAACC,MAAM,CAACC,QAAQ;EAE9ElB,SAAS,CAAC,MAAM;IACdK,QAAQ,CAACc,OAAO,CAACC,YAAY,GAAGd,SAAS;IACzCG,YAAY,CAACY,OAAO,CAACnB,OAAO,EAAEI,SAAS,CAAC;EAC1C,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;EAEfN,SAAS,CAAC,MAAM;IACdK,QAAQ,CAACc,OAAO,CAACG,SAAS,GAAG,MAAM;MACjCV,iBAAiB,CAAC,IAAI,CAAC;IACzB,CAAC;IACDP,QAAQ,CAACc,OAAO,CAACI,OAAO,GAAG,MAAM;MAC/BX,iBAAiB,CAAC,KAAK,CAAC;IAC1B,CAAC;IACDP,QAAQ,CAACc,OAAO,CAACK,OAAO,GAAG,MAAM;MAC/BZ,iBAAiB,CAAC,KAAK,CAAC;IAC1B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMa,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAIC,OAAO,GAAG,IAAI;IAElB,QAAQpB,SAAS;MACf,KAAK,GAAG;QACNoB,OAAO,GAAG,CAAC;QACX;MACF,KAAK,CAAC;QACJA,OAAO,GAAG,GAAG;QACb;MACF,KAAK,GAAG;QACNA,OAAO,GAAG,CAAC;QACX;MACF,KAAK,CAAC;QACJA,OAAO,GAAG,GAAG;QACb;MACF;QACEA,OAAO,GAAG,CAAC;QACX;IACJ;IAEAnB,YAAY,CAACmB,OAAO,CAAC;EACvB,CAAC;EAED,MAAMC,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAIC,SAAS,GAAGxB,GAAG;IAEnB,IAAIS,KAAK,EAAE;MACTe,SAAS,GAAGA,SAAS,CAACC,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC;IAC/C;IAEA,oBACE/B,KAAA,CAAAgC,aAAA;MAAQC,GAAG,EAAEH,SAAU;MAACI,IAAI,EAAEnB,KAAK,GAAG,WAAW,GAAG,WAAY;MAAAoB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAC;EAEvE,CAAC;EAED,oBACExC,KAAA,CAAAgC,aAAA,CAAAhC,KAAA,CAAAyC,QAAA,qBACEzC,KAAA,CAAAgC,aAAA;IAAOU,GAAG,EAAEnC,QAAS;IAACoC,QAAQ;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC3BX,cAAc,CAAC,CACX,CAAC,EACPhB,cAAc,iBACbb,KAAA,CAAAgC,aAAA,CAACjC,MAAM;IACL6C,KAAK,EAAE;MAAEC,UAAU,EAAE,KAAK;MAAEC,SAAS,EAAE;IAAQ,CAAE;IACjDC,OAAO,EAAEpB,UAAW;IAAAQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEnBhC,SAAS,EAAC,GACL,CAEV,CAAC;AAET,CAAC;AAED,eAAeH,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module"}